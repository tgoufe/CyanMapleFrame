!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=35)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){"use strict";var r=n(14),o=n.n(r),i=n(12),a=n.n(i),c=n(1),u=n.n(c),s=n(3),l=n.n(s),f=n(4),h=n.n(f),p=n(7),y=n(6),v={eventType:"modelChange"},g={},d={},m={},_=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l()(this,e),this._value=Object.create(null),this._history=Object.create(null),this._syncToList=[],this.config=Object(y.a)(n,e._CONFIG),this._listener=Object(p.b)(this,this.config.eventType,function(e,n,r){t._sync(n,r)})}return h()(e,[{key:"_lastData",value:function(e){var t=this._history[e];return t||(t=this._history[e]=[null]),t[t.length-1]}},{key:"_trackData",value:function(e,t){var n=this._lastData(e);t!==n&&(this._history[e].push(t),console.log("设置 ".concat(e," 的值为 ").concat(t)),this._trigger(e,t,n))}},{key:"_trigger",value:function(e,t,n){this._listener.trigger(e,t,n)}},{key:"_sync",value:function(e,t){this._syncToList.length&&Promise.all(this._syncToList.map(function(n){var r;return(r=null!==t?n.setData(e,t):n.removeData(e)).catch(function(r){console.log("".concat(n.constructor.name," ").concat(e," ").concat(t," 同步失败"),r)}),r})).then(function(){console.log("同步完成")})}},{key:"_setByObject",value:function(e){var t=this;return Promise.all(Object.keys(e).map(function(n){return t.setData(n,e[n])})).then(function(e){return!!e})}},{key:"_getByArray",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.getData(e).catch(function(){return null})})).then(function(t){return e.reduce(function(e,n,r){return e[n]=t[r],e},{})})}},{key:"_removeByArray",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.removeData(e)})).then(function(e){return!!e})}},{key:"setData",value:function(e,t){var n,r=this;return"object"===u()(e)?n=this._setByObject(e):(e in this._value?this._value[e]=t:(Object.defineProperty(this._value,e,{enumerable:!0,configurable:!0,set:function(t){r._trackData(e,t)},get:function(){return r._lastData(e)}}),this._trackData(e,t)),n=Promise.resolve(!0)),n}},{key:"getData",value:function(e){var t=arguments.length;return Array.isArray(e)?this._getByArray(e):t>1?this._getByArray([].slice.call(arguments)):e in this._value?Promise.resolve(this._value[e]):Promise.reject(null)}},{key:"removeData",value:function(e){var t,n=arguments.length;if(Array.isArray(e))t=this._removeByArray(e);else if(n>1)t=this._removeByArray([].slice.call(arguments));else try{this._value=null,t=Promise.resolve(!0)}catch(e){t=Promise.reject(e)}return t}},{key:"clearData",value:function(){var e=this;return Object.keys(this._value).forEach(function(t){null!==e._lastData(t)&&e._history[t].push(null)}),this._value={},Promise.resolve(!0)}},{key:"on",value:function(e){return this._listener.add(e),this}},{key:"off",value:function(e){return this._listener.off(e),this}},{key:"syncTo",value:function(t){var n=this;return Array.isArray(t)||(t=[t]),t.forEach(function(t){e.is(t)&&t!==n&&-1===n._syncToList.indexOf(t)?n._syncToList.push(t):console.log("该实例类型已经存在")}),this}},{key:"cleanSync",value:function(e){var t=this._syncToList.indexOf(e);return-1!==t&&this._syncToList.splice(t,1),this}},{key:"toString",value:function(){return JSON.stringify(this._value)}},{key:"toJSON",value:function(){return this._value}},{key:Symbol.iterator,value:a.a.mark(function e(){var t,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(this._value),n=0,r=t.length;case 2:if(!(n<r)){e.next=8;break}return e.next=5,{topic:t[n],value:this._value[t[n]]};case 5:n++,e.next=2;break;case 8:o()({a:1,b:2,c:3},Symbol.iterator,a.a.mark(function e(){var t,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(this),n=0,r=t.length;case 2:if(!(n<r)){e.next=8;break}return e.next=5,{topic:t[n],value:this[t[n]]};case 5:n++,e.next=2;break;case 8:case"end":return e.stop()}},e,this)}));case 9:case"end":return e.stop()}},e,this)})},{key:Symbol.asyncIterator,value:a.a.mark(function e(){var t,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(this._value),n=0,r=t.length;case 2:if(!(n<r)){e.next=8;break}return e.next=5,Promise.resolve({topic:t[n],value:this._value[t[n]]});case 5:n++,e.next=2;break;case 8:case"end":return e.stop()}},e,this)})},{key:Symbol.toStringTag,get:function(){return"Model"}}],[{key:"register",value:function(t,n){t in e._MODEL&&t in e._MODEL_CACHE?console.log("".concat(t," 重复注册，并已生成实例，不能覆盖")):e._MODEL[t]=n}},{key:"registerAlias",value:function(t,n){Array.isArray(n)||(n=[n]),n.forEach(function(n){n in e._MODEL_ALIAS?console.log("".concat(n," 已经存在")):e._MODEL_ALIAS[n]=t})}},{key:"factory",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t?("object"===u()(r)&&(o=r,r=!0),!(t in e._MODEL)&&t in e._MODEL_ALIAS&&(t=e._MODEL_ALIAS[t]),t in e._MODEL?!r&&t in e._MODEL_CACHE?(n=e._MODEL_CACHE[t],console.log("从缓存中取到 ".concat(t," 类型的对象"))):(n=new e._MODEL[t](o),r||(e._MODEL_CACHE[t]=n,console.log("通过工厂方法生成 ".concat(t," 类型的对象, 将 ").concat(t," 类型的对象缓存")))):(n=new e,console.log("不存在注册为 ".concat(t," 的子类")))):(n=new e,console.log("生成 model 对象")),n}},{key:"is",value:function(e){return e&&"Model"===e[Symbol.toStringTag]}},{key:"stringify",value:function(e){return null==e&&(e=""),"object"===u()(e)?JSON.stringify(e):e.toString()}},{key:"_CONFIG",get:function(){return v}},{key:"_MODEL",get:function(){return g}},{key:"_MODEL_CACHE",get:function(){return d}},{key:"_MODEL_ALIAS",get:function(){return m}}]),e}();t.a=_},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(38);function o(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}},o(t,n,i||t)}e.exports=o},function(e,t,n){"use strict";var r=n(15),o=n.n(r);t.a=function(e,t){return o()({},t,e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(1),o=n.n(r),i=n(3),a=n.n(i),c=n(4),u=n.n(c),s=n(6),l=n(10),f={type:"",target:self||null,capture:!0,passive:!1,once:!1,intersectionObserver:!1,mutationObserver:!1,observerOptions:{}},h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a()(this,e),!t.type)throw console.log("未指定监听事件"),new Error("未指定监听事件");this._config=Object(s.a)(t,e._CONFIG),this._isListening=!1,this._listener=null,this._eventQueue=new l.a,this._config.intersectionObserver?this._config.type="intersectionObserver":this._config.mutationObserver&&(this._config.type="mutationObserver")}return u()(e,[{key:"_queueExecute",value:function(){var e=this._eventQueue;return function(){var t,n=this||null;return(t=e.with(n)).line.apply(t,arguments)}}},{key:"add",value:function(e){return this._isListening||this.on(),this._eventQueue.has(e)?console.log("该函数已经存在于队列中"):this._eventQueue.add(e),this}},{key:"on",value:function(e){var t=this._config,n=t.target,r=t.intersectionObserver,o=t.mutationObserver,i=t.observerOptions;return e&&this._eventQueue.add(e),this._isListening||!this._config.target?this:(this._listener=this._queueExecute(),this._isListening=!0,r?(this._observer=new IntersectionObserver(this._listener,i),this._observer.observe(n)):o?(this._observer=new MutationObserver(this._listener),this._observer.observe(n,i)):"addEventListener"in n&&"function"==typeof n.addEventListener&&n.addEventListener(this._config.type,this._listener,this._config),this)}},{key:"off",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._config,n=t.target,r=t.intersectionObserver,o=t.mutationObserver;return this._config.target&&this._listener?("boolean"==typeof e&&e?(r||o?(this._observer.unobserve(n),this._observer.disconnect()):"removeEventListener"in n&&n.removeEventListener(this._config.type,this._listener,this._config),this._isListening=!1):"function"==typeof e&&this._eventQueue.remove(e),this):this}},{key:"trigger",value:function(){for(var e=this._config.target,t={type:this._config.type,target:this._config.target},n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.unshift(t),this._listener.apply(e,r),this._config.once&&this.off()}},{key:"target",value:function(e){return{trigger:function(){}}}},{key:"type",value:function(e){}},{key:"targetTrigger",value:function(e,t){}},{key:Symbol.toStringTag,get:function(){return"Listener"}}],[{key:"_CONFIG",get:function(){return f}}]),e}();t.b=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={};return"object"===o()(r)&&(i=r,r=null),"function"==typeof t&&(r=t,t=null),"string"==typeof e&&(t=e,e=null),t&&(a.type=t),e&&(a.target=e),a=Object(s.a)(a,i),n=new h(a),r&&(n.on(),n.add(r)),n}},function(e,t,n){var r=n(1),o=n(22);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t,n){var r=n(16);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){"use strict";var r=n(11),o=n.n(r),i=n(3),a=n.n(i),c=n(4),u=n.n(c),s=function(){function e(){a()(this,e),this._queue=[],this._currIndex=0}return u()(e,[{key:"_allExecutor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r,i){var a;null!==i&&(e.is(i)?r.push.apply(r,(a=i.with(t)).all.apply(a,o()(n))):r.push(i.apply(t,n)));return r}}},{key:"_funcExecutor",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!0;return function(a,c){var u;i&&(a||c)&&(i=!1,null===a&&(a=c,c=null),e.is(a)?a=(u=a.with(n))[t].apply(u,o()(r)):null!==c&&(a=a.apply(n,r)));return null!==c?e.is(c)?c.with(n)[t](a):c.call(n,a):a}}},{key:"_lineExecutor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r){var i;return null!==r&&(e.is(r)?(i=r.with(t)).line.apply(i,o()(n)):!1===r.apply(t,n))}}},{key:"_funcExecutorPromise",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!0;return function(a,c){var u;i&&(a||c)&&(i=!1,null===a&&(a=c,c=null),e.is(a)?a=(u=a.with(n))[t].apply(u,o()(r)):null!==c&&(a=Promise.resolve(a.apply(n,r))));return null!==c?a.then(function(r){return e.is(c)?c.with(n)[t](r):c.call(n,r)}):a}}},{key:"_lineExecutorPromise",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r,i){return null!==i?r.then(function(r){return!1===r?Promise.reject():e.is(i)?(a=i.with(t)).line.apply(a,o()(n)):i.apply(t,n);var a}):r}}},{key:"add",value:function(t){return"function"==typeof t||e.is(t)?this._queue.push(t):-1}},{key:"has",value:function(e){return-1!==this._queue.indexOf(e)}},{key:"remove",value:function(t){if("function"==typeof t||e.is(t))t=this._queue.indexOf(t);else{if("number"!=typeof t)return;t=parseInt(t)}t>-1&&(this._queue[t]=null)}},{key:"clear",value:function(){this._queue=[],this._currIndex=0}},{key:"all",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._queue.reduce(this._allExecutor(null,t),[])}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._queue.reduce(this._funcExecutor("pipe",null,t))}},{key:"compose",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._queue.reduceRight(this._funcExecutor("compose",null,t))}},{key:"line",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!this._queue.some(this._lineExecutor(null,t))}},{key:"with",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e._queue.reduce(e._allExecutor(t,r),[])};return{all:n,pipe:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e._queue.reduce(e._funcExecutor("pipe",t,r))},compose:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e._queue.reduceRight(e._funcExecutor("compose",t,r))},line:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return!e._queue.some(e._lineExecutor(t,r))},promise:{all:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.all(n(t))},pipe:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e._queue.reduce(e._funcExecutorPromise("pipe",t,r))},compose:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e._queue.reduceRight(e._funcExecutorPromise("compose",t,r))},line:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e._queue.reduce(e._lineExecutorPromise(t,r),Promise.resolve())}}}}},{key:"promise",get:function(){var e=this;return{all:function(){return Promise.all(e.all.apply(e,arguments))},pipe:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._queue.reduce(e._funcExecutorPromise("pipe",null,n))},compose:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._queue.reduceRight(e._funcExecutorPromise("compose",null,n))},line:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._queue.reduce(e._lineExecutorPromise(null,n),Promise.resolve())}}}},{key:Symbol.toStringTag,get:function(){return"HandlerQueue"}}],[{key:"is",value:function(e){return e&&"HandlerQueue"===e[Symbol.toStringTag]}}]),e}();t.a=s},function(e,t,n){var r=n(19),o=n(20),i=n(21);e.exports=function(e){return r(e)||o(e)||i()}},function(e,t,n){e.exports=n(23)},function(e,t,n){"use strict";var r=n(24),o=n(40),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===i.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return c(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:s,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)s(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,o=arguments.length;r<o;r++)s(arguments[r],n);return t},extend:function(e,t,n){return s(t,function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(14);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=n(3),a=n.n(i),c=n(4),u=n.n(c),s=n(8),l=n.n(s),f=n(0),h=n.n(f),p=n(9),y=n.n(p),v=n(2),g=n(6),d={cacheName:"storage"},m=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a()(this,t),(e=l()(this,h()(t).call(this,n)))._config=Object(g.a)(n,t._CONFIG),"caches"in self?e._store=Promise.resolve(self.caches):e._store=Promise.reject(new Error("此浏览器不支持 Service Worker")),e}return y()(t,e),u()(t,[{key:"setData",value:function(e,n){var r=this;return this._store.then(function(e){return e.open(r._config.cacheName)}).then(function(r){return console.log("缓存 ".concat("string"==typeof e?e:e.url)),r.put(t.tranToRequest(e),n)})}},{key:"getData",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=t.tranToRequest(e),this._store.then(function(t){return t.match(e,n)}).then(function(t){return t||Promise.reject(new Error("不存在缓存 "+e.url))})}},{key:"removeData",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=t.tranToRequest(e),this._store.then(function(e){return e.open(n._config.cacheName)}).then(function(t){return t.delete(e,r)})}},{key:"clearData",value:function(){var e=this;this._store.then(function(t){return t.delete(e._config.cacheName)})}},{key:"addData",value:function(e){var t=this;return this._store.then(function(e){return e.open(t._config.cacheName)}).then(function(t){return t.add(e)})}},{key:"addAll",value:function(e){var t=this;return this._store.then(function(e){return e.open(t._config.cacheName)}).then(function(t){return t.addAll(e)})}},{key:"keys",value:function(){return this._store.then(function(e){return e.keys()})}},{key:"cacheDelete",value:function(e){return this._store.then(function(t){return t.delete(e)})}},{key:"catch",value:function(e){"function"==typeof e&&this._store.catch(e)}},{key:Symbol.toStringTag,get:function(){return"CacheStorageModel"}}],[{key:"tranToRequest",value:function(e){return"object"===o()(e)&&e instanceof Request||(e=new Request(e)),e}},{key:"_CONFIG",get:function(){return d}}]),t}(v.a);v.a.register("cacheStorage",m),v.a.registerAlias("cacheStorage","cs"),t.a=m},function(e,t,n){"use strict";t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",r=arguments.length>3?arguments[3]:void 0;e.postMessage(t,n,r)}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(e,t,n){var r=l;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw i;return D()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=s(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",y={};function v(){}function g(){}function d(){}var m={};m[i]=function(){return this};var _=Object.getPrototypeOf,b=_&&_(_(A([])));b&&b!==n&&r.call(b,i)&&(m=b);var w=d.prototype=v.prototype=Object.create(m);function k(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function S(e){var t;this._invoke=function(n,o){function i(){return new Promise(function(t,i){!function t(n,o,i,a){var c=s(e[n],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(l).then(function(e){u.value=e,i(u)},function(e){return t("throw",e,i,a)})}a(c.arg)}(n,o,t,i)})}return t=t?t.then(i,i):i()}}function O(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=s(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:D}}function D(){return{value:t,done:!0}}return g.prototype=w.constructor=d,d.constructor=g,d[c]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,o){var i=new S(u(t,n,r,o));return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},k(w),w[c]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(13);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))}))}),i=a.join("&")}if(i){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(13),o=n(46),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={adapter:(void 0!==t&&"[object process]"===Object.prototype.toString.call(t)?c=n(28):"undefined"!=typeof XMLHttpRequest&&(c=n(28)),c),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){u.headers[e]={}}),r.forEach(["post","put","patch"],function(e){u.headers[e]=r.merge(i)}),e.exports=u}).call(this,n(45))},function(e,t,n){"use strict";var r=n(13),o=n(47),i=n(25),a=n(49),c=n(50),u=n(29);e.exports=function(e){return new Promise(function(t,s){var l=e.data,f=e.headers;r.isFormData(l)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",y=e.auth.password||"";f.Authorization="Basic "+btoa(p+":"+y)}if(h.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};o(t,s,r),h=null}},h.onabort=function(){h&&(s(u("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){s(u("Network Error",e,null,h)),h=null},h.ontimeout=function(){s(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var v=n(51),g=(e.withCredentials||c(e.url))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;g&&(f[e.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(f,function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete f[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),s(e),h=null)}),void 0===l&&(l=null),h.send(l)})}},function(e,t,n){"use strict";var r=n(48);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e,t){t=t||{};var n={};return r.forEach(["url","method","params","data"],function(e){void 0!==t[e]&&(n[e]=t[e])}),r.forEach(["headers","auth","proxy"],function(o){r.isObject(t[o])?n[o]=r.deepMerge(e[o],t[o]):void 0!==t[o]?n[o]=t[o]:r.isObject(e[o])?n[o]=r.deepMerge(e[o]):void 0!==e[o]&&(n[o]=e[o])}),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r=n(0),o=n(16),i=n(36),a=n(37);function c(t){var n="function"==typeof Map?new Map:void 0;return e.exports=c=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},c(t)}e.exports=c},function(e,t,n){e.exports=n(39)},,function(e,t,n){e.exports=n(63)},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(16);function o(t,n,i){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=o=function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i}:e.exports=o=Reflect.construct,o.apply(null,arguments)}e.exports=o},function(e,t,n){var r=n(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t,n){"use strict";var r=n(13),o=n(24),i=n(41),a=n(30);function c(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var u=c(n(27));u.Axios=i,u.create=function(e){return c(a(u.defaults,e))},u.Cancel=n(31),u.CancelToken=n(54),u.isCancel=n(26),u.all=function(e){return Promise.all(e)},u.spread=n(55),e.exports=u,e.exports.default=u},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";var r=n(13),o=n(25),i=n(42),a=n(43),c=n(30);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=c(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},u.prototype.getUri=function(e){return e=c(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(e){u.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}}),r.forEach(["post","put","patch"],function(e){u.prototype[e]=function(t,n,o){return this.request(r.merge(o||{},{method:e,url:t,data:n}))}}),e.exports=u},function(e,t,n){"use strict";var r=n(13);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,n){"use strict";var r=n(13),o=n(44),i=n(26),a=n(27),c=n(52),u=n(53);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.baseURL&&!c(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return s(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,s=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?s=u.concat(s):f=-1,s.length&&p())}function p(){if(!l){var e=c(h);l=!0;for(var t=s.length;t;){for(u=s,s=[];++f<t;)u&&u[f].run();f=-1,t=s.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new y(e,t)),1!==s.length||l||c(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(29);e.exports=function(e,t,n){var o=n.config.validateStatus;!o||o(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(13),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(13);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(13);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var c=[];c.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),r.isString(o)&&c.push("path="+o),r.isString(i)&&c.push("domain="+i),!0===a&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(31);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},,,,,,,,function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return Re}),n.d(r,"Model",function(){return $.a}),n.d(r,"CookieModel",function(){return re}),n.d(r,"LocalStorageModel",function(){return ae}),n.d(r,"SessionStorageModel",function(){return ue}),n.d(r,"IndexedDBModel",function(){return fe}),n.d(r,"WebSQLModel",function(){return ye}),n.d(r,"FileSystemModel",function(){return _e}),n.d(r,"CacheStorageModel",function(){return be.a}),n.d(r,"ServiceModel",function(){return je}),n.d(r,"WebSocketModel",function(){return Pe}),n.d(r,"EventSourceModel",function(){return Ce});var o={};n.r(o),n.d(o,"default",function(){return Ke}),n.d(o,"Router",function(){return ze});var i={};n.r(i),n.d(i,"animator",function(){return nt}),n.d(i,"queue",function(){return rt});var a=n(15),c=n.n(a),u=n(7),s=function(e,t,n,r){var o=null,i=null,a=null,c=function(){for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];var s=this||null;o&&(clearTimeout(o),a={context:s,argv:c}),r&&r>t&&(i||(i=setTimeout(function(){e.apply(a.context,a.argv),o&&(clearTimeout(o),o=null),i=null},r))),o=setTimeout(function(){e.apply(s,c),i&&(clearTimeout(i),i=null)},t)};return"number"==typeof n&&(r=n,n=null),c.cancel=function(){i&&(clearTimeout(i),i=null),o&&(clearTimeout(o),o=null,n&&n())},c.immediate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];c.cancel(),e.apply(t,n)},c},l=function(e,t,n,r){var o=null,i=!1,a=null,c=function n(){for(var c=arguments.length,u=new Array(c),s=0;s<c;s++)u[s]=arguments[s];var l=this||null;o?r&&(i=!0,a={context:l,argv:u}):(e.apply(l,u),o=setTimeout(function(){clearTimeout(o),o=null,i&&(n.apply(a.context,a.argv),i=!1,a=null)},t))};return"boolean"==typeof n&&(r=n,n=null),c.cancel=function(){o&&(clearTimeout(o),o=null),i=!1,a=null,n&&n()},c.immediate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];c.cancel(),i=!1,a=null,c.apply(e,t)},c},f=function(e){var t=function t(){if(t._enable)return t._enable=!1,e.apply(null,arguments)};return t._enable=!0,t.clear=function(){t._enable=!0},t},h=n(3),p=n.n(h),y=n(4),v=n.n(y),g=n(8),d=n.n(g),m=n(0),_=n.n(m),b=n(9),w=n.n(b),k=n(32),S=function(e){function t(e){var n;return p()(this,t),(n=d()(this,_()(t).call(this,"\narguments.callee.beforeRun(this, arguments);\nlet rs = arguments.callee.original.apply(this, arguments);\narguments.callee.afterRun(this, arguments);\nreturn rs;\n"))).beforeQueue=[],n.afterQueue=[],n.original=e,n}return w()(t,e),v()(t,[{key:"before",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.beforeQueue.push.apply(this.beforeQueue,t),this}},{key:"beforeRun",value:function(e,t){this.beforeQueue.forEach(function(n){return n.apply(e,t)})}},{key:"after",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.afterQueue.push.apply(this.afterQueue,t),this}},{key:"afterRun",value:function(e,t){this.afterQueue.forEach(function(n){return n.apply(e,t)})}},{key:"around",value:function(e,t){return this.beforeQueue.push(e),this.afterQueue.push(t||e),this}}]),t}(n.n(k)()(Function)),O=function(e){return new S(e)},E=function(e,t){return Promise.race([e,new Promise(function(e,n){setTimeout(function(){n(new Error("执行超时"))},t)})])},x=n(6),j=function(e,t){return e.reduce(function(e,n){return n[t]&&(n[t]in e||(e[n[t]]=[]),e[n[t]].push(n)),e},{})},A={fillZero:function(e,t){var n;if(t>(e+="").length)for(n=e.length;n<t;n++)e="0"+e;return e}},D=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD").replace(/(YYYY|YY|MM|DD|hh|mm|ss|星期|周|www|week)/g,function(n){return e._dateStrReplace[n](t)})};D._dateStrReplace={YYYY:function(e){return e.getFullYear()+""},YY:function(e){return(e.getFullYear()+"").slice(2)},MM:function(e){return A.fillZero(e.getMonth()+1,2)},DD:function(e){return A.fillZero(e.getDate(),2)},hh:function(e){return A.fillZero(e.getHours(),2)},mm:function(e){return A.fillZero(e.getMinutes(),2)},ss:function(e){return A.fillZero(e.getSeconds(),2)},www:function(e){return D._WEEK_EN[e.getDay()].slice(0,3)},week:function(e){return D._WEEK_EN[e.getDay()]},"星期":function(e){return"星期"+D._WEEK_CN[e.getDay()]},"周":function(e){return"周"+D._WEEK_CN[e.getDay()]}},D.formatTimeStr=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d",r=0;return"number"==typeof e?r=n&&n in D._SHORT_TIME_NUM?e*D._SHORT_TIME_NUM[n]:e:"string"==typeof e&&(t=D._SHORT_TIME_EXPR.exec(e))&&(r=Number(t[1])*(D._SHORT_TIME_NUM[t[2]]||1)),r},D._WEEK_EN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],D._WEEK_CN=["日","一","二","三","四","五","六"],D._SHORT_TIME_EXPR=/^(-?\d+)([smhdy])?$/i,D._SHORT_TIME_NUM={s:1e3,m:6e4,h:36e5,d:864e5,y:31536e6};var P=D,T=n(10),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="\nvar executor = ".concat(e.toString(),";\nonmessage = function(e){\n\ttry{\n\t\tpostMessage( executor(e.data) );\n\t}\n\tcatch(error){\n\t\tpostMessage( error );\n\t}\t\t\t\n}\n"),r=new Blob([n],{type:"text/javascript"}),o=new Worker(URL.createObjectURL(r));return function(e){return new Promise(function(n,r){var i={};Object.defineProperty(i,"data",{set:function(e){n(e)}}),o||r(new Error("worker 已终止")),o.postMessage(e),o.onmessage=function(e){var n=e.data;o.onmessage=null,t&&(o.terminate(),o=null),n instanceof Error?r(e.data):i.data=e.data},o.onerror=r})}},L={debounce:s,throttle:l,lockup:f,timeout:E,aspect:O,Aspect:S,merge:x.a,classify:j,dateFormat:P,HandlerQueue:T.a,tools:A,thread:N},C=n(11),R=n.n(C),I=n(1),q=n.n(I),M=["source","protocol","origin","host","port","path","relative","file","dir","segments","params","query","hash","from"],B=function(){function e(t){p()(this,e);var n,r=e.createParseTarget(t);-1===["http:","https:"].indexOf(r.protocol)&&(n=r.protocol,r=e.createParseTarget(r.href.replace(n,"http:"))),this.protocol=(n||r.protocol).replace(":",""),this.source=r.href,this.origin=r.origin,this.port=r.port||"80",this.host=r.hostname+("80"!==this.port?":"+this.port:""),this.path=r.pathname.replace(/^([^\/])/,"$1"),this.relative=(r.href.match(/tps?:\/\/[^\/]+(.*)/)||["",""])[1],this.file=(r.pathname.match(/\/([^\/?#]+)$/i)||["",""])[1],this.dir=this.path.replace(this.file,""),this.segments=r.pathname.replace(/^\//,"").split("/"),this.params=this.parseSearch(r.search),this.hash=r.hash.slice(1),this.from=document.referrer,r=null}return v()(e,[{key:"parseSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&/^\?/.test(e)&&(e=e.slice(1)),e?e.split("&").reduce(function(e,t){var n,r,o;if(t){n=t.split("="),r=decodeURIComponent(n[0]),o=decodeURIComponent(n[1]||"");try{o=JSON.parse(o)}catch(e){}e[r]=o}return e},{}):{}}},{key:"pack",value:function(){return"".concat(this.protocol,"://").concat(this.host).concat(this.path).concat(this.query)+(this.hash?"#".concat(this.hash):"")}},{key:"changeParams",value:function(e){var t,n=this;return t="string"==typeof e?[].slice.call(arguments):e,Array.isArray(t)?t.forEach(function(e){"string"==typeof e&&delete n.params[e]}):"object"===q()(t)&&Object.keys(t).forEach(function(t){n.params[t]=e[t]}),this}},{key:"changeTo",value:function(t){var n=this.source;return e._INDEX.reduce(function(e,n){return"query"!==n&&(e[n]=t[n]),e},this),this.from=n,this}},{key:"toString",value:function(){var t=this;return JSON.stringify(e._INDEX.reduce(function(e,n){return e[n]=t[n],e},{}))}},{key:"toJSON",value:function(){var t=this;return e._INDEX.reduce(function(e,n){return e[n]=t[n],e},{})}},{key:"query",get:function(){var e=this,t=Object.keys(this.params).reduce(function(t,n){return t.push(encodeURIComponent(n)+"="+encodeURIComponent(e.params[n])),t},[]);return t.length?"?"+t.join("&"):""}}],[{key:"createParseTarget",value:function(e){var t;if("URL"in self)t=new URL(e||location.href,location.origin);else if("webkitURL"in self)t=new webkitURL(e||location.href,location.origin);else{if(!("document"in self))throw new Error("当前环境不支持该功能");(t=document.createElement("a")).href=e||location.href}return t}},{key:"_INDEX",get:function(){return M}}]),e}(),F=new B;F.Url=B,F.parseUrl=function(e){return e instanceof B?e:"string"==typeof e?new B(e):new B},F.addProtocol=function(e){return/^\/\//.test(e)?(void 0).protocol+e:e},F.reload=function(){location.reload()},F.back=function(){history.back()},F.forward=function(){history.forward()},F.go=function(e){history.go(e)},F.setHash=function(e){return this.hash=e,location.hash=e,this},F.pushParams=function(e,t){var n=arguments.length,r=arguments,o=null;return n>1&&("object"===q()(e)?o=r[1]:"object"===q()(r[n-1])&&(o=r[n-1],r=[].slice.call(r,0,-1))),this.changeParams.apply(this,R()(r)),history.pushState(o,"",this.pack()),this},F.replaceParams=function(e,t){var n=arguments.length,r=arguments,o=null;return n>1&&("object"===q()(e)?o=r[1]:"object"===q()(r[n-1])&&(o=r[n-1],r=[].slice.call(r,0,-1))),this.changeParams.apply(this,R()(r)),history.replaceState(o,"",this.pack()),this},F.pushHistory=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return history.pushState(t,"",e),this.changeTo(this.parseUrl(e)),this},F.replaceHistory=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return history.replaceState(t,"",e),this.changeTo(this.parseUrl(e)),this},F.changePage=function(e){location.assign(e)},F.replacePage=function(e){location.replace(e)},F.hashChange=Object(u.b)("hashchange",function(e,t){var n;e.newURL?n=F.parseUrl(e.newURL):t&&(n=F.parseUrl(t)),n&&F.changeTo(n)}),F.popState=Object(u.b)("popstate",function(e,t){var n,r=e.state;if(n=t?F.parseUrl(t):F.parseUrl(location.href),F.changeTo(n),"string"==typeof r)try{r=JSON.parse(r)}catch(e){}});var U=F,W={androidchorme:"androidchrome",guge:"chrome",webview:"webView",minimalui:"minimalUi",statusbar:"statusBar",pixelratio:"pixelRatio",wechat:"weixin",wx:"weixin"},H=navigator.userAgent,G=function e(){var t,n,r=arguments.length,o=!0;if(0===r)o=!1;else for(t=0;t<r&&(o=(n=arguments[t])in e&&e.hasOwnProperty(n)?o&&e[n]:(n=n.toLowerCase())in W?o&&e[W[n]]:o&&!1);t++);return o},J=H.match(/(Android);?[\s\/]+([\d.]+)?/),Q=H.match(/(iPad).*OS\s([\d_]+)/),V=H.match(/(iPod)(.*OS\s([\d_]+))?/),Y=!Q&&H.match(/(iPhone\sOS)\s([\d_]+)/);G.ios=G.android=G.iphone=G.ipad=G.androidChrome=!1,G.chrome=H.toLowerCase().indexOf("chrome")>=0,J&&(G.os="android",G.osVersion=J[2],G.androidChrome=(G.android=!0)&&G.chrome),(Q||Y||V)&&(G.os="ios",G.ios=!0),Y&&!V&&(G.osVersion=Y[2].replace(/_/g,"."),G.iphone=!0),Q&&(G.osVersion=Q[2].replace(/_/g,"."),G.ipad=!0),V&&(G.osVersion=V[3]?V[3].replace(/_/g,"."):null,G.iphone=!0),G.ios&&G.osVersion&&H.indexOf("Version/")>=0&&"10"===G.osVersion.split(".")[0]&&(G.osVersion=H.toLowerCase().split("version/")[1].split(" ")[0]),G.webView=(Y||Q||V)&&H.match(/.*AppleWebKit(?!.*Safari)/i),G.wechat=G.weixin=/MicroMessenger/i.test(H),G.uc=H.indexOf("UCBrowser")>-1,G.alipay=H.indexOf("AlipayClient")>0;var z=G;G.pixelRatio=window.devicePixelRatio||1;var K=document.documentElement.clientHeight,X=document.documentElement.clientWidth;G.statusBar=G.webView&&X*K==screen.width*screen.height;var $=n(2),Z=n(5),ee=n.n(Z),te={path:"/",domain:"",expires:"",secure:""},ne=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(this,t),e=d()(this,_()(t).call(this,n)),navigator.cookieEnabled?(e._enabled=!0,e._store=Promise.resolve().then(function(){return e.refresh()})):(e._enabled=!1,e._store=Promise.reject(new Error("此浏览器不支持 Cookie"))),e}return w()(t,e),v()(t,[{key:"_setCookie",value:function(e,n,r){return"object"!==q()(r)&&(r={expires:r}),r.expires&&(r.expires=t._transDate(r.expires)),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t.stringify(n))+Object.keys(t._DEFAULT).reduce(function(e,n){var o=r[n]||t._DEFAULT[n];return o&&(e+="; "+n+"="+o),e},""),!0}},{key:"_getCookie",value:function(e){var n,r,o=(document.cookie||"").split("; "),i=0,a="";for(n=o.length;i<n;i++)if(r=o[i].split("="),e===decodeURIComponent(r[0])){a=decodeURIComponent(r[1]);break}if(a){try{a=JSON.parse(a)}catch(e){}ee()(_()(t.prototype),"setData",this).call(this,e,a)}else a=Promise.reject(null);return a}},{key:"_setByObject",value:function(e,t){var n=this;return Promise.all(Object.keys(e).map(function(r){return n.setData(r,e[r],t)})).then(function(e){return e.every(function(e){return e})})}},{key:"setData",value:function(e,n,r){var o,i=this;return"object"===q()(e)?(r=n,o=this._setByObject(e,r)):o=ee()(_()(t.prototype),"setData",this).call(this,e,n).then(function(){return i._store}).then(function(){return i._setCookie(e,n,r)}),o}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r>1?this._getByArray([].slice.call(arguments)):ee()(_()(t.prototype),"getData",this).call(this,e).catch(function(){return n._store.then(function(){return n._getCookie(e)})})}},{key:"removeData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._removeByArray(e):r>1?this._removeByArray([].slice.call(arguments)):ee()(_()(t.prototype),"removeData",this).call(this,e).then(function(){return n._setCookie(e,"",-1)})}},{key:"clearData",value:function(){return ee()(_()(t.prototype),"clearData",this).call(this)}},{key:"setDataSync",value:function(e,n,r){var o=this,i=!!this._enabled;if(this._enabled)try{"object"===q()(e)?(r=n,Object.keys(e).forEach(function(n){o._setCookie(n,e[n],r),ee()(_()(t.prototype),"setData",o).call(o,n,e[n])})):this._setCookie(e,n,r),i=!0}catch(e){i=!1}return i}},{key:"getDataSync",value:function(e){var n=this,r=arguments.length,o=null;return this._enabled&&(o=(Array.isArray(e)?r>1?[].slice.call(arguments):e:[e]).reduce(function(e,r){if(r in n._value)e[r]=n._value[r];else{var o=n._getCookie(r);if(o instanceof Promise)e[r]=null;else{e[r]=o;try{e[r]=JSON.parse(e[r])}catch(e){}}ee()(_()(t.prototype),"setData",n).call(n,r,e[r])}return e},{}),Array.isArray(e)||(o=o[e])),o}},{key:"getCookieLength",value:function(){return this._enabled?document.cookie.length:0}},{key:"refresh",value:function(){var e=this;return this.clearData().then(function(){return Promise.all((document.cookie||"").split("; ").map(function(n){var r;n=n.split("="),r=decodeURIComponent(n[1]);try{r=JSON.parse(r)}catch(e){}return ee()(_()(t.prototype),"setData",e).call(e,decodeURIComponent(n[0]),r)}))}).then(function(){return!0})}},{key:"catch",value:function(e){"function"==typeof e&&this._store.catch(e)}},{key:"sync",get:function(){var e=this;return{setData:function(){return e.setDataSync.apply(e,arguments)},getData:function(){return e.getDataSync.apply(e,arguments)}}}}],[{key:"_transDate",value:function(e){return e instanceof Date||(e=0===(e=P.formatTimeStr(e))?"":new Date(Date.now()+e)),e&&e.toUTCString()}},{key:"setDomain",value:function(e){te.domain=e}},{key:"_DEFAULT",get:function(){return te}}]),t}($.a);$.a.register("cookie",ne),$.a.registerAlias("cookie","c");var re=ne,oe={listen:!0},ie=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(this,t),(e=d()(this,_()(t).call(this,n)))._config=Object(x.a)(n,t._CONFIG),"localStorage"in self?(e._enabled=!0,e._storeSync=self.localStorage,e._store=Promise.resolve(self.localStorage),e._config.listen&&(t.listenOn(),t._GLOBAL_LISTENER.add(function(t){var n=t.key,r=t.newValue;try{r=JSON.parse(r)}catch(t){}e.setData(n,r)}))):(e._enabled=!1,e._storeSync=null,e._store=Promise.reject(new Error("此浏览器不支持 localStorage"))),e}return w()(t,e),v()(t,[{key:"setData",value:function(e,n){var r=this;return"object"===q()(e)?this._setByObject(e):ee()(_()(t.prototype),"setData",this).call(this,e,n).then(function(){return r._store}).then(function(r){return r.setItem(e,t.stringify(n)),!0})}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r.length>1?this._getByArray([].slice.call(arguments)):ee()(_()(t.prototype),"getData",this).call(this,e).catch(function(){return n._store.then(function(r){var o=r.getItem(e);if(null===o)o=Promise.reject(null);else{try{o=JSON.parse(o)}catch(e){}ee()(_()(t.prototype),"setData",n).call(n,e,o)}return o})})}},{key:"removeData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._removeByArray(e):r>1?this._removeByArray([].slice.call(arguments)):ee()(_()(t.prototype),"removeData",this).call(this,e).then(function(){return n._store.then(function(t){return t.removeItem(e),!0})})}},{key:"clearData",value:function(){var e=this;return ee()(_()(t.prototype),"clearData",this).call(this).then(function(){return e._store.then(function(e){return e.clear(),!0})})}},{key:"setDataSync",value:function(e,n){var r=this,o=!!this._enabled;if(this._enabled)try{"object"===q()(e)?Object.keys(e).forEach(function(n){r._storeSync.setItem(n,t.stringify(e[n])),ee()(_()(t.prototype),"setData",r).call(r,n,e[n])}):this._storeSync.setItem(e,t.stringify(n)),o=!0}catch(e){o=!1}return o}},{key:"getDataSync",value:function(e){var n=this,r=arguments.length,o=null;return this._enabled&&(o=(Array.isArray(e)?r>1?[].slice.call(arguments):e:[e]).reduce(function(e,r){if(r in n._value)e[r]=n._value[r];else{e[r]=n._storeSync.getItem(r);try{e[r]=JSON.parse(e[r])}catch(e){}ee()(_()(t.prototype),"setData",n).call(n,r,e[r])}},{}),Array.isArray(e)||(o=o[e])),o}},{key:"catch",value:function(e){"function"==typeof e&&this._store.catch(e)}},{key:"sync",get:function(){var e=this;return{setData:function(){return e.setDataSync.apply(e,arguments),!0},getData:function(){return e.getDataSync.apply(e,arguments)}}}}],[{key:"listenOn",value:function(){t._listenOn||(t._GLOBAL_LISTENER=Object(u.b)("storage"),t._listenOn=!0)}},{key:"listenOff",value:function(){t._listenOn&&t._GLOBAL_LISTENER&&(t._GLOBAL_LISTENER.off(),t._GLOBAL_LISTENER=null,t._listenOn=!1)}},{key:"_CONFIG",get:function(){return oe}}]),t}($.a);ie._listenOn=!0,ie._GLOBAL_LISTENER=Object(u.b)("storage"),$.a.register("localStorage",ie),$.a.registerAlias("localStorage","ls");var ae=ie,ce=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(this,t),e=d()(this,_()(t).call(this,n)),"sessionStorage"in self?(e._enabled=!0,e._storeSync=self.sessionStorage,e._store=Promise.resolve(self.sessionStorage)):(e._enabled=!1,e._storeSync=null,e._store=Promise.reject(new Error("此浏览器不支持 sessionStorage"))),e}return w()(t,e),v()(t,[{key:"setData",value:function(e,n){var r=this;return"object"===q()(e)?this._setByObject(e):ee()(_()(t.prototype),"setData",this).call(this,e,n).then(function(){return r._store}).then(function(r){return r.setItem(e,t.stringify(n)),!0})}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r>1?this._getByArray([].slice.call(arguments)):ee()(_()(t.prototype),"getData",this).call(this,e).catch(function(){return n._store.then(function(r){var o=r.getItem(e);if(null===o)o=Promise.reject(null);else{try{o=JSON.parse(o)}catch(e){}ee()(_()(t.prototype),"setData",n).call(n,e,o)}return o})})}},{key:"removeData",value:function(e){var n,r=this,o=arguments.length;return n=n?this._removeByArray(e):o>1?this._removeByArray([].slice.call(arguments)):ee()(_()(t.prototype),"removeData",this).call(this,e).then(function(){return r._store.then(function(t){return t.removeItem(e),!0})})}},{key:"clearData",value:function(){var e=this;return ee()(_()(t.prototype),"clearData",this).call(this).then(function(){return e._store.then(function(e){return e.clear(),!0})})}},{key:"setDataSync",value:function(e,n){var r=this,o=!!this._enabled;if(this._enabled)try{"object"===q()(e)?Object.keys(e).forEach(function(n){r._storeSync.setItem(n,t.stringify(e[n])),ee()(_()(t.prototype),"setData",r).call(r,n,e[n])}):this._storeSync.setItem(e,t.stringify(n)),o=!0}catch(e){o=!1}return o}},{key:"getDataSync",value:function(e){var n=this,r=arguments.length,o=null;return this._enabled&&(o=(Array.isArray(e)?r>1?[].slice.call(arguments):e:[e]).reduce(function(e,r){if(r in n._value)e[r]=n._value[r];else{e[r]=n._storeSync.getItem(r);try{e[r]=JSON.parse(e[r])}catch(e){}ee()(_()(t.prototype),"setData",n).call(n,r,e[r])}},{}),Array.isArray(e)||(o=o[e])),o}},{key:"catch",value:function(e){"function"==typeof e&&this._store.catch(e)}},{key:"sync",get:function(){var e=this;return{setData:function(){return e.setDataSync.apply(e,arguments)},getData:function(){return e.getDataSync.apply(e,arguments)}}}}]),t}($.a);$.a.register("sessionStorage",ce),$.a.registerAlias("sessionStorage","ss");var ue=ce,se={dbName:"storage",tableName:"storage",dbVersion:1,keyPath:"topic",index:[{name:"topic",keyPath:"topic",unique:!0},{name:"value",keyPath:"value",unique:!1}]},le=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(this,t),(e=d()(this,_()(t).call(this,n)))._config=Object(x.a)(n,t._CONFIG),e._store=new Promise(function(t,n){var r,o;(r=self.indexedDB||self.mozIndexedDB||self.webbkitIndexedDB||self.msIndexedDB||null)?((o=r.open(e._config.dbName,e._config.dbVersion)).onupgradeneeded=function(t){var n,r=t.target.result;r.objectStoreNames.contains(e._config.tableName)||(n=r.createObjectStore(e._config.tableName,{keyPath:e._config.keyPath}),e._config.index.forEach(function(e){n.createIndex(e.name,e.keyPath||e.name,{unique:e.unique||!1})}))},o.onsuccess=function(e){t(e.target.result)},o.onerror=function(e){console.log(e),n(e)}):n(new Error("此数据库不支持 IndexedDB"))}),e}return w()(t,e),v()(t,[{key:"_select",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){var i=n.transaction([t._config.tableName],"readwrite").objectStore(t._config.tableName).get(e);i.onsuccess=function(e){r(e.target.result)},i.onerror=function(e){console.log(e),o(e)}})})}},{key:"_put",value:function(e,t){var n=this;return this._store.then(function(r){return new Promise(function(o,i){var a=r.transaction([n._config.tableName],"readwrite").objectStore(n._config.tableName).put({topic:e,value:t});a.onsuccess=function(e){o(!!e.target.result)},a.onerror=function(e){console.log(e),i(e)}})})}},{key:"_delete",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){var i=n.transaction([t._config.tableName],"readwrite").objectStore(t._config.tableName).delete(e);i.onsuccess=function(){r(!0)},i.onerror=function(e){console.log(e),o(e)}})})}},{key:"_clear",value:function(){var e=this;return this._store.then(function(t){return new Promise(function(n,r){var o=t.transaction([e._config.tableName],"readwrite").objectStore(e._config.tableName).clear();o.onsuccess=function(){n(!0)},o.onerror=function(e){console.log(e),r(e)}})})}},{key:"setData",value:function(e,n){var r=this;return"object"===q()(e)?this._setByObject(e):ee()(_()(t.prototype),"setData",this).call(this,e,n).then(function(){return r._put(e,n)})}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r>1?this._getByArray([].slice.call(arguments)):ee()(_()(t.prototype),"getData",this).call(this,e).catch(function(){return n._select(e).then(function(r){var o;if(r){if("string"==typeof(o=r.value))try{o=JSON.parse(o)}catch(e){}ee()(_()(t.prototype),"setData",n).call(n,e,o)}else o=Promise.reject(null);return o})})}},{key:"removeData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._removeByArray(e):r>1?this._removeByArray([].slice.call(arguments)):ee()(_()(t.prototype),"removeData",this).call(this,e).then(function(){return n._delete(e)})}},{key:"clearData",value:function(){var e=this;return ee()(_()(t.prototype),"clearData",this).call(this).then(function(){return e._clear()})}},{key:"getDataByRange",value:function(e,t){var n=this;!(arguments.length>2&&void 0!==arguments[2])||arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length;return this._store.then(function(e){return new Promise(function(t,r){var o=e.transaction([n._config.tableName],"readwrite").objectStore(n._config.tableName).openCursor(),i=[];o.onsuccess=function(e){var n=e.target.result;n?(i.push(n.value),n.continue()):t(i)},o.onerror=function(e){console.log(e),r(e)}})})}},{key:"catch",value:function(e){"function"==typeof e&&this._store.catch(e)}}],[{key:"_CONFIG",get:function(){return se}}]),t}($.a);$.a.register("indexedDB",le),$.a.registerAlias("indexedDB","idb");var fe=le,he={dbName:"storage",tableName:"storage",dbVersion:1,dbSize:2<<20,sql:{create:"create table if not exists `{{tableName}}`(id integer primary key autoincrement,topic text unique,value text)",select:"select * from `{{tableName}}` where topic=?",update:"update `{{tableName}}` set value=? where topic=?",insert:"insert into `{{tableName}}`(topic,value) values(?,?)",delete:"delete from `{{tableName}}` where topic=?",clear:"delete from `{{tableName}}`",createIndex:"create index if not exists index_{{col}} on `{{tableName}}`(`{{col}}`)"}},pe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p()(this,t),e=d()(this,_()(t).call(this,n));var r=n.sql;return e._config=Object(x.a)(n,t._CONFIG),r&&"object"===q()(r)&&(e._config.sql=Object(x.a)(r,t._CONFIG.sql)),Object.keys(e._config.sql).forEach(function(t){e._config.sql[t]=e._replaceTableName(e._config.sql[t])}),e._store=new Promise(function(t,n){var r;"openDatabase"in self?(r=openDatabase(e._config.dbName,""+e._config.dbVersion,e._config.dbName,e._config.dbSize)).transaction(function(o){o.executeSql(e._config.sql.create,[],function(){t(r)},function(e,t){console.log(t),n(t)})}):n(new Error("此浏览器不支持 Web SQL Database"))}),e}return w()(t,e),v()(t,[{key:"_replaceTableName",value:function(e){return e.replace(/{{tableName}}/g,this._config.tableName)}},{key:"_select",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){n.transaction(function(n){n.executeSql(t._config.sql.select,[e],function(e,t){r(t.rows)},function(e,t){console.log(t),o(t)})})})})}},{key:"_update",value:function(e,t){var n=this;return this._store.then(function(r){return new Promise(function(o,i){r.transaction(function(r){r.executeSql(n._config.sql.update,[t,e],function(e,t){o(!!t.rowsAffected)},function(e,t){console.log(t),i(t)})})})})}},{key:"_insert",value:function(e,t){var n=this;return this._store.then(function(r){return new Promise(function(o,i){r.transaction(function(r){r.executeSql(n._config.sql.insert,[e,t],function(e,t){o(!!t.insertId)},function(e,t){console.log(t),i(t)})})})})}},{key:"_delete",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){n.transaction(function(n){n.executeSql(t._config.sql.delete,[e],function(e,t){r(!!t.rowsAffected)},function(e,t){console.log(t),o(t)})})})})}},{key:"_clear",value:function(){var e=this;return this._store.then(function(t){return new Promise(function(n,r){t.transaction(function(t){t.executeSql(e._config.sql.clear,[],function(e,t){n(!!t.rowsAffected)},function(e,t){console.log(t),r(t)})})})})}},{key:"setData",value:function(e,n){var r=this;return"object"===q()(e)?this._setByObject(e):ee()(_()(t.prototype),"setData",this).call(this,e,n).then(function(){return n=t.stringify(n),r._select(e)}).then(function(t){return t&&t.length?r._update(e,n):r._insert(e,n)})}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r>1?this._getByArray([].slice.call(arguments)):ee()(_()(t.prototype),"getData",this).call(this,e).catch(function(){return n._select(e).then(function(r){var o="";if(r&&r.length){o=r[0].value;try{o=JSON.parse(o)}catch(e){}ee()(_()(t.prototype),"setData",n).call(n,e,o)}else o=Promise.reject(null);return o})})}},{key:"removeData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._removeByArray(e):r>1?this._removeByArray([].slice.call(arguments)):ee()(_()(t.prototype),"removeData",this).call(this,e).then(function(){return n._delete(e)})}},{key:"clearData",value:function(){var e=this;return this.clearData().then(function(){return e._clear()})}},{key:"executeSql",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this._store.then(function(n){return new Promise(function(r,o){n.transaction(function(n){n.executeSql(e,t,function(e,t){r(t)},function(e,t){console.log(t),o(t)})})})})}},{key:"createIndex",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){n.transaction(function(n){n.executeSql(t._config.sql.createIndex.replace(/{{col}}/g,e),[],function(e,t){r(!!t.rowsAffected)},function(e,t){o(t)})})})})}},{key:"catch",value:function(e){"function"==typeof e&&this._store.catch(e)}}],[{key:"_CONFIG",get:function(){return he}}]),t}($.a);$.a.register("webSQL",pe),$.a.registerAlias("webSQL",["ws","sql"]);var ye=pe,ve=n(14),ge=n.n(ve),de={fileName:"storage.txt",fileSize:0,fileType:1},me=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(this,t),(e=d()(this,_()(t).call(this,n)))._config=Object(x.a)(n,t._CONFIG),e._fs=new Promise(function(t,n){var r=self.requestFileSystem||self.webkitRequestFileSystem||null;r?r(self.PERSISTENT,e._config.fileSize,t,n):n(new Error("此浏览器不支持 Local File System"))}),e}return w()(t,e),v()(t,[{key:"_getFileEntry",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._fs.then(function(n){return new Promise(function(r,o){n.root.getFile(e._config.fileName,t,r,o)})})}},{key:"_getFileWriter",value:function(e){return new Promise(function(t,n){e.createWriter(t,n)})}},{key:"_writeFile",value:function(e,t){return new Promise(function(n,r){var o=new Blob([t],{type:"text/plain"});e.onwriteend=function(e){n(!0)},e.onerror=function(e){console.log(e),r(e)},e.write(o)})}},{key:"_write",value:function(e){var t=this;return this._getFileEntry().then(function(e){return console.log("写入文件 ".concat(e.toURL())),t._getFileWriter(e)}).then(function(n){return t._writeFile(n,e)}).then(function(){return!0})}},{key:"_getFile",value:function(e){return new Promise(function(t,n){return e.file(t,n)})}},{key:"_readFile",value:function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){console.log(e),n(e)},r.readAsText(e)})}},{key:"_read",value:function(){var e=this;return this._getFileEntry({create:!0}).then(function(t){return console.log("读取文件 ".concat(t.toURL())),e._getFile(t)}).then(function(t){return e._readFile(t)},function(e){return console.log(e),"{}"}).then(function(e){e=e||"{}";try{return e=JSON.parse(e)}catch(e){return console.log(e),Promise.reject(e)}})}},{key:"setData",value:function(e,n){var r,o,i=this;return"object"===q()(e)?o=e:"string"==typeof e&&(o=ge()({},e,n)),o?(Object.keys(o).forEach(function(e){return ee()(_()(t.prototype),"setData",i).call(i,e,o[e])}),r=this._read().then(function(e){return Object(x.a)(o,e)}).then(function(e){return i._write(JSON.stringify(e))})):r=Promise.reject(new Error("参数错误")),r}},{key:"getData",value:function(e){var n,r=this,o=arguments.length,i=null;return n=Array.isArray(e)?e:o>1?[].slice.call(arguments):[e],Promise.all(n.map(function(e){return ee()(_()(t.prototype),"getData",r).call(r,e).catch(function(){return i||(i=r._read()),i.then(function(t){return t[e]||null})})})).then(function(t){return Array.isArray(e)||o>1?n.reduce(function(e,n,r){return e[n]=t[r],e},{}):t[0]})}},{key:"removeData",value:function(e){var n,r=this,o=arguments.length;return(n=Array.isArray(e)?e:o>1?[].slice.call(arguments):[e]).forEach(function(e){return ee()(_()(t.prototype),"removeData",r).call(r,e)}),this._read().then(function(e){return n.reduce(function(e,t){return delete e[t],e},e)}).then(function(e){return r._write(JSON.stringify(e))})}},{key:"clearData",value:function(){var e=this;return ee()(_()(t.prototype),"clearData",this).call(this).then(function(){return e._getFileEntry({create:!1})}).then(function(e){return new Promise(function(t,n){console.log("".concat(e.toURL()," 文件被删除")),e.remove(t,n)})})}},{key:"getUsage",value:function(){return new Promise(function(e,t){navigator.webkitPersistentStorage.queryUsageAndQuota(function(t,n){e({usage:t,all:n,percent:t/n*100+"%"})})})}},{key:"catch",value:function(e){"function"==typeof e&&this._fs.catch(e)}}],[{key:"_CONFIG",get:function(){return de}},{key:"PERSISTENT",get:function(){return self.PERSISTENT}},{key:"TEMPORARY",get:function(){return self.TEMPORARY}}]),t}($.a);$.a.register("file",me),$.a.registerAlias("file",["fs"]);var _e=me,be=n(17),we=n(33),ke=n.n(we),Se=function(e,t){try{return ke()(e,t).then(function(n){var r=n.data;return{topic:e,options:t,res:r}},function(n){if(n.response);else if(!n.request)return console.log(n.message),Promise.reject(n);return{topic:e,options:t,error:n}})}catch(e){return console.log(e.message),Promise.reject(e)}},Oe={baseUrl:"",task:!1,timeout:1e4},Ee={req:new T.a,res:new T.a},xe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(this,t),(e=d()(this,_()(t).call(this,n)))._config=Object(x.a)(n,t._CONFIG),e._syncTo=null,e.interceptor={req:new T.a,res:new T.a},e._execReqInterceptor=new T.a,e._execReqInterceptor.add(t.interceptor.req),e._execReqInterceptor.add(function(e){var t=e.topic;console.log("执行局部请求拦截器 ".concat(t))}),e._execReqInterceptor.add(e.interceptor.req),e._execResInterceptor=new T.a,e._execResInterceptor.add(t.interceptor.res),e._execResInterceptor.add(function(e){var t=e.topic;console.log("执行局部响应拦截器 ".concat(t))}),e._execResInterceptor.add(e.interceptor.res),e}return w()(t,e),v()(t,[{key:"_setOpts",value:function(e){return Object(x.a)(e,{cache:!1,dataType:"json",timeout:this._config.timeout||1e4,xhrFields:{withCredentials:!0}})}},{key:"_reqInterceptor",value:function(e,t){return console.log("执行全局请求拦截器 ".concat(e)),this._execReqInterceptor.promise.line({topic:e,options:t})}},{key:"_resInterceptor",value:function(e){return console.log("执行全局响应拦截器 ".concat(e.topic)),this._execResInterceptor.promise.line(e)}},{key:"_send",value:function(e,t){var n=this;return this._reqInterceptor(e,t).then(function(e){var t=e.topic,n=e.options;return console.log("发送 ".concat(n.method," 请求 ").concat(t)),Se(t,n)}).then(function(e){return n._resInterceptor(e)}).then(function(e){return"res"in e?e.res:"error"in e?Promise.reject(e.error):Promise.reject(new Error("未知错误"))})}},{key:"setData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"boolean"==typeof n&&(r=n,n={}),"object"===q()(e)&&(e=(n=e).url),e=this._config.baseUrl+e,(n=this._setOpts(n)).method=n.method||"POST",e?this._send(e,n).then(function(n){return r&&t._syncTo?t._syncTo.setData(e,n).then(function(){return n},function(e){return console.log(e),n}):n}):Promise.reject(new Error("缺少 topic 参数"))}},{key:"getData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"boolean"==typeof n&&(r=n,n={}),"object"===q()(e)&&(e=(n=e).url),e=this._config.baseUrl+e,(n=this._setOpts(n)).method=n.method||"GET",e?(r&&this._syncTo?this._syncTo.getData(e):Promise.reject("没有同步缓存")).catch(function(){return t._send(e,n).then(function(n){return r&&t._syncTo?t._syncTo.setData(e,n).then(function(){return n},function(e){return console.log(e),n}):n})}):Promise.reject(new Error("缺少 topic 参数"))}},{key:"removeData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"boolean"==typeof n&&(r=n,n={}),"object"===q()(e)&&(e=(n=e).url),e=this._config.baseUrl+e,(n=this._setOpts(n)).method=n.method||"DELETE",e?this._send(e,n).then(function(n){return r&&t._syncTo?t._syncTo.removeData(e).then(function(){return n},function(e){return console.log(e),n}):n}):Promise.reject(new Error("缺少 topic 参数"))}},{key:"clearData",value:function(){return Promise.resolve(!0)}},{key:"syncTo",value:function(e){return $.a.is(e)&&(this._syncTo=e),this}},{key:Symbol.toStringTag,get:function(){return"ServiceModel"}}],[{key:"use",value:function(){}},{key:"_CONFIG",get:function(){return Oe}},{key:"interceptor",get:function(){return Ee}}]),t}($.a);$.a.ServiceModel=xe,$.a.register("service",xe),$.a.registerAlias("service","s");var je=xe,Ae={protocol:"ws"},De=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(this,t),(e=d()(this,_()(t).call(this,n)))._config=Object(x.a)(n,t._CONFIG),e._conn=e._createConn(),e}return w()(t,e),v()(t,[{key:"_createConn",value:function(){var e=this;return new Promise(function(n,r){var o;e._config.url?"WebSocket"in self?(/^wss?:\/\//.test(e._config.url)||(e._config.url=("https"===U.protocol?"wss":"ws")+"://"+e._config.url),(o=new WebSocket(e._config.url,e._config.protocol)).onopen=function(){console.log("建立 Web Socket 连接"),n(o)},o.onmessage=function(n){var r=n.data;if(r instanceof ArrayBuffer)console.log("ArrayBuffer",r),r={topic:"ArrayBuffer",data:r};else if(r instanceof Blob)console.log("Blob",r),r={topic:"Blob",data:r};else if("string"==typeof r)try{r=JSON.parse(r)}catch(n){r={topic:e._config.url,data:r}}else"object"!==q()(r)&&(r={});r.topic&&r.data&&ee()(_()(t.prototype),"setData",e).call(e,r.topic,r.data)},o.onerror=function(t){var n=new Error("该 Web Socket 出现异常进而关闭");console.log(t),e._conn=Promise.reject(n),r(n)},o.onclose=function(t){var n=new Error("该 Web Socket 连接已经被关闭");console.log(t),e._conn=Promise.reject(n),r(n)},e._config.binaryType&&(o.binaryType=e._config.binaryType)):r(new Error("此浏览器不支持 Web Socket")):r(new Error("缺少参数 url"))})}},{key:"_state",value:function(e){return e.readyState===WebSocket.OPEN}},{key:"setData",value:function(e,t){var n=this;return this._conn.then(function(r){var o;return n._state(r)?(r.send(JSON.stringify({topic:e,data:t})),o=!0):o=Promise.reject(new Error("该 Web Socket 连接已被关闭")),o})}},{key:"getData",value:function(){return Promise.reject(null)}},{key:"removeData",value:function(){return Promise.reject(!1)}},{key:"clearData",value:function(){return Promise.reject(!1)}},{key:"syncTo",value:function(e){return $.a.is(e)&&(this._syncTo=e),this}},{key:"close",value:function(e,t){return console.log("关闭当前 Web Socket 连接"),this._conn.then(function(e){try{e.close()}catch(e){}return!0})}},{key:"catch",value:function(e){"function"==typeof e&&this._conn.catch(e)}},{key:"reset",value:function(){var e=this;return console.log("重置当前 Web Socket 连接"),this.close().then(function(){return e._conn=e._createConn(),!0})}},{key:Symbol.toStringTag,get:function(){return"WebSocketModel"}}],[{key:"_CONFIG",get:function(){return Ae}}]),t}($.a);$.a.register("webSocket",De),$.a.registerAlias("webSocket","socket");var Pe=De,Te={},Ne=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(this,t),(e=d()(this,_()(t).call(this,n)))._config=Object(x.a)(n,t._CONFIG),e._conn=e._createConn(),e}return w()(t,e),v()(t,[{key:"_createConn",value:function(){var e=this;return new Promise(function(n,r){var o;e._config.url?"EventSource"in self?((o=new EventSource(e._config.url,e._config)).onopen=function(){n(o)},o.onmessage=function(n){var r=n.data;try{r=JSON.parse(r)}catch(n){r={topic:e._config.url,data:r}}ee()(_()(t.prototype),"setData",e).call(e,r.topic,r.data)},o.onerror=function(t){var n=new Error("该 Event Source 出现异常进而关闭");console.log(t),e._conn=Promise.reject(n),r(n)},o.onclose=function(t){var n=new Error("该 Event Source 连接已被关闭");console.log(t),e._conn=Promise.reject(n),r(n)}):r(new Error("此浏览器不支持 Event Source")):r(new Error("缺少参数 url"))})}},{key:"setData",value:function(){return Promise.reject(!1)}},{key:"getData",value:function(){return Promise.reject(null)}},{key:"removeData",value:function(){return Promise.reject(!1)}},{key:"clearData",value:function(){return Promise.reject(!1)}},{key:"syncTo",value:function(e){return $.a.is(e)&&(this._syncTo=e),this}},{key:"close",value:function(){return console.log("关闭当前 Event Source 连接"),this._conn.then(function(e){try{e.close()}catch(e){}return!0})}},{key:"catch",value:function(e){"function"==typeof e&&this._conn.catch(e)}},{key:"reset",value:function(){var e=this;console.log("重置当前 Event Source 连接"),this.close().then(function(){return e._conn=e._createConn(),!0})}},{key:Symbol.toStringTag,get:function(){return"EventSourceModel"}}],[{key:"_CONFIG",get:function(){return Te}}]),t}($.a);$.a.register("eventSource",Ne),$.a.registerAlias("eventSource",["sse","es","event"]);var Le,Ce=Ne,Re=$.a,Ie=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p()(this,e),this._listener=Object(u.b)("intersection"),this._observer=new Promise(function(e,r){"IntersectionObserver"in self?e(new IntersectionObserver(function(e){e.forEach(function(e){t._listener.trigger(e)})},n)):r(new Error("当前浏览器不支持 IntersectionObserver"))})}return v()(e,[{key:"observe",value:function(e,t){if(e instanceof Element)this._observer.then(function(t){t.observe(e)});else{if(!(e instanceof NodeList||e instanceof HTMLCollection))return void console.log("监听目标非 Element、NodeList、HTMLCollection 类型对象，无法监听");this._observer.then(function(t){Array.from(e).forEach(function(e){t.observe(e)})})}this._listener.add(t)}},{key:"unobserve",value:function(e){this._observer.then(function(t){t.unobserve(e)})}},{key:"disconnect",value:function(){var e=this;this._observer.then(function(t){t.disconnect(),e._observer=Promise.reject(new Error("监听已停止"))})}}]),e}(),qe=Object(u.b)("scroll"),Me=(Object(u.b)("scroll",{intersectionObserver:!0}),document.body),Be=document.documentElement,Fe=Me.scrollTop;qe.disabled=function(e){e?(this._overflowState=window.getComputedStyle(Me).overflow||"visible",Me.style.overflow="hidden"):Me.style.overflow=this._overflowState||"visible"},Me.scrollTop=Fe+1,Me.scrollTop===Fe+1?(Le=Me,Me.scrollTop=Fe):Le=Be,qe.scrollBar=function(e,t){var n,r=0,o=1,i=1;if(1===arguments.length){switch(arguments[0]){case"top":o=Le.scrollHeight,r=Le.scrollTop,i=Be.clientHeight;break;case"bottom":o=Le.scrollHeight,i=Be.clientHeight,r=o-Le.scrollTop-i;break;case"left":o=Le.scrollWidth,r=Le.scrollLeft,i=Be.clientWidth;break;case"right":o=Le.scrollWidth,i=Be.clientWidth,r=o-Le.scrollLeft-i}return{px:r,percent:Math.floor(r/o*100),view:parseFloat((r/i).toFixed(1))}}if(n=/^(\d+(?:\.\d+)?)(%|view)?$/.exec(t))switch(e){case"top":r=parseFloat(n[1]),"%"===n[2]?r=r*Le.scrollHeight/100:"view"===n[2]&&(r*=Be.clientHeight),Le.scrollTop=r;break;case"bottom":r=parseFloat(n[1]),r="%"===n[2]?Math.max(Le.scrollHeight*(1-r/100),0):"view"===n[2]?Math.max(Le.scrollHeight-r*Be.clientHeight,0):Math.max(Le.scrollHeight-r,0),Le.scrollTop=r;break;case"left":r=parseFloat(n[1]),"%"===n[2]?r=r*Le.scrollWidth/100:"view"===n[2]&&(r*=Be.clientWidth),Le.scrollLeft=r;break;case"right":r=parseFloat(n[1]),r="%"===n[2]?Math.max(Le.scrollWidth*(1-r/100),0):"view"===n[2]?Math.max(Le.scrollWidth-r*Be.clientWidth,0):Math.max(Le.scrollWidth-r,0),Le.scrollLeft=r}else console.log("scrollBar 参数设置错误")},qe.observer=new Ie,qe.resetObserver=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qe.observer.disconnect(),qe.observer=new Ie(e)};var Ue=qe,We=n(18),He=function(e){var t=arguments.length;return!!navigator.vibrate&&(t>1?navigator.vibrate([].slice.call(arguments)):navigator.vibrate(e))},Ge=He,Je=!1,Qe={scroll:Ue,resize:Object(u.b)("resize"),devicemotion:Object(u.b)("devicemotion"),pageshow:Object(u.b)("pageshow"),pagehide:Object(u.b)("pagehide"),focus:Object(u.b)("focus"),blur:Object(u.b)("blur"),visibilitychange:Object(u.b)("visibilitychange"),online:Object(u.b)("online"),offline:Object(u.b)("offline"),message:Object(u.b)("message"),beforeunload:Object(u.b)("beforeUnload"),unload:Object(u.b)("unload")},Ve=c()({on:function(e,t){e in Qe||(Qe[e]=Object(u.b)(e)),Qe[e].add(t)},trigger:function(e){if(e in Qe){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=Qe[e]).trigger.apply(t,r)}console.log("不存在 ".concat(e," 类型的事件"))},eventList:Qe},Qe,{ScrollObserver:Ie,needRefresh:function(){Je||(Qe.pageshow.add(function(){Qe.pagehide.add(function(){U.reload()})}),Je=!0)},postMessage:We.a,vibrate:Ge,clearVibrate:function(){He(0)},offset:function(e,t){var n=null;return"getBoundingClientRect"in e&&(n=e.getBoundingClientRect(),t&&(n=n[t])),n}}),Ye={mode:"history",baseUrl:""},ze=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p()(this,e),this.routers=[],this.config=Object(x.a)(n,e._CONFIG),this._historyList=[{url:U.source,time:Date.now()}],this._listener=Object(u.b)(this,"routerChange"),this._listener.on(),"history"===this.config.mode?U.popState.add(function(e){var n=U.parseUrl(location.href);t.has(n.path)?t._get(n).then(function(){t._historyList.push({url:n.source,time:Date.now()})}).then(function(){t._trigger()}):(console.log("router 中不存在 ".concat(location.href),e),t.config.fallback&&t.config.fallback(location.href))}):"hash"===this.config.mode&&U.hashChange.add(function(e){var n=e.newURL,r=U.parseUrl(n),o=r.hash;r=U.parseUrl(o),t.has(r.path)?t._get(r).then(function(){t._historyList.push({url:n,time:Date.now()})}).then(function(){t._trigger()}):(console.log("router 中不存在 ".concat(location.href),e),t.config.fallback&&t.config.fallback(location.href))}),"routers"in this.config&&Array.isArray(this.config.routers)&&this.config.routers.forEach(function(e){t.register(e)})}return v()(e,[{key:"_trigger",value:function(){var e=this._historyList.length,t=e>2?this._historyList[e-2]:this._historyList[0],n=this._historyList[e-1];this._listener.trigger(t,n)}},{key:"_getRouteIndex",value:function(e){return this.routers.findIndex(function(t){return t.pattern.test(e)})}},{key:"_get",value:function(e){var t,n,r,o,i=e.path,a=e.params,c=this._getRouteIndex(i);return-1!==c?n=(t=this.routers[c]).pattern.exec(i):r=Promise.reject("router 中不存在"),n?(o=n.slice(1).reduce(function(e,n,r){return e[t.paramNames[r]]=n,e},{}),o=Object(x.a)(o,a),r=Promise.resolve().then(function(){if(t.before)return t.before(o)}).then(function(e){return!1===e?Promise.reject("路由执行被阻止, before 返回 false"):t.callback?t.callback(o):void 0}).then(function(e){return!1===e?Promise.reject("路由执行被阻止, callback 返回 false"):t.after?t.after(o):void 0}).then(function(e){if(!1===e)return Promise.reject("路由执行被阻止, after 返回 false")})):r=Promise.reject("路由路径不匹配"),r.catch(function(e){return e instanceof Error?console.log("".concat(i," 路由执行错误"),e):console.log(i,e),Promise.reject()})}},{key:"_goHistory",value:function(e){var t=this;this._get(e).then(function(){U.pushHistory(e.pack()),t._historyList.push({url:e.pack(),time:Date.now()})}).then(function(){t._trigger()})}},{key:"_goHash",value:function(e){U.setHash(e.path+e.query)}},{key:"init",value:function(){var e;"history"===this.config.mode?e=U:"hash"===this.config.mode&&(e=U.parseUrl(U.hash||"/")),this.has(e.path)&&this._get(e)}},{key:"register",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=[],o=null,i="";return Array.isArray(e)?(e.forEach(function(e){t.register(e)}),this):("object"!==q()(e)||e instanceof RegExp?i=e:(i=e.path,n=e.callback||function(){}),"object"===q()(i)&&i instanceof RegExp?o=i:"string"==typeof i&&(o=i.replace(/:([^\/]*)/g,function(e,t){return r.push(t),"([^\\/]+)"}),/^\//.test(i)||(o=this.config.baseUrl?this.config.baseUrl+o:U.dir+o),o=new RegExp("^"+o+"$")),o&&this.routers.push({pattern:o,paramNames:r,callback:n}),this)}},{key:"has",value:function(e){return e=U.parseUrl(e).path,-1!==this._getRouteIndex(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("number"==typeof e)return U.go(e),!0;var n=U.parseUrl(e),r=this.has(n.path);return r?(n.changeParams(t),"history"===this.config.mode?this._goHistory(n):"hash"===this.config.mode&&this._goHash(n)):this._trigger(),r}},{key:"back",value:function(){U.back()}},{key:"forward",value:function(){U.forward()}},{key:"on",value:function(e){this._listener.add(e)}},{key:"currentPath",get:function(){var e=this._historyList.length;return U.parseUrl(this._historyList[e-1]).path}}],[{key:"_CONFIG",get:function(){return Ye}}]),e}(),Ke=ze,Xe=Object(u.b)("error"),$e=Object(u.b)("unhandledrejection"),Ze=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"geolocation"in navigator?new Promise(function(n,r){var o=Object(x.a)(t,e._CONFIG);navigator.geoposition.getCurrentPosition(n,r,o)}):Promise.reject(new Error("您的浏览器不支持地理定位功能"))};Ze._CONFIG={enableHighAccuracy:!0,timeout:2e3,maximumAge:5e3};var et=Ze,tt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear";p()(this,e),this.duration=t,this.progress=n,this._animate=null,"function"==typeof r?this.easing=r:"string"==typeof r&&r in e.timing?this.easing=e.timing[r]:this.easing=e.timing.linear}return v()(e,[{key:"run",value:function(e){var t=Date.now(),n=this.duration,r=this;this._animate=requestAnimationFrame(function o(){var i=(Date.now()-t)/n,a=!0;i<1?r.progress(r.easing(i),i):(a="function"==typeof e?!1===e():!1===e)?(t+=n,r.progress(r.easing(i),i)):r.progress(r.easing(1),1),r._animate=a?requestAnimationFrame(o):null})}},{key:"stop",value:function(){this._animate&&(cancelAnimationFrame(this._animate),this._animate=null)}},{key:"renderCSS",value:function(){}}]),e}();tt.timing={linear:function(e){return e},easing:function(e){},easingIn:function(e){},easingInOut:function(e){},easingOut:function(e){}};var nt=tt,rt=function(){function e(t){p()(this,e),this.animators=t||[]}return v()(e,[{key:"append",value:function(){this.animators.push.apply(this.animators,arguments)}},{key:"flush",value:function(){var e=this;this.animators.length&&function t(){var n=e.animators.shift();n instanceof nt?n.start(function(){e.animators.length&&t()}):(n.apply(e),e.animators.length&&t())}()}}]),e}();function ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(x.a)(e,ot._CONFIG);return new Promise(function(e,r){"serviceWorker"in navigator?n.file in ot._CACHE||(ot._CACHE[n.file]=navigator.serviceWorker.register(n.file,{scope:n.scope}).then(function(e){var t;return e.installing?t=e.installing:e.waiting?t=e.waiting:e.active&&(t=e.active),t&&t.addEventListener("statechange",function(e){console.log("state change: ".concat(e.target.state))}),!0}).catch(function(e){console.log(e)}),navigator.serviceWorker.ready.then(function(n){Notification.requestPermission().then(function(e){if("granted"===e){if(!t)return;"string"==typeof t?t&&n.showNotification(t):"object"===q()(t)&&t.title&&n.showNotification(t.title,t)}}),n.pushManager.getSubscription().then(function(e){return e?console.log("已经订阅 ".concat(e.endpoint)):e=n.pushManager.subscribe({userVisibleOnly:!0}).then(function(t){return console.log("订阅成功 ".concat(t.endpoint)),e}).catch(function(e){return console.log("订阅失败",e),Promise.reject(new Error("订阅失败"))}),e}).then(function(e){e.endpoint},function(){}),navigator.serviceWorker.controller?e(navigator.serviceWorker.controller):r(new Error("Service Worker 注册失败"))})):r(new Error("该浏览器不支持 Service Worker"))})}ot._CACHE={},ot._CONFIG={file:"/sw.js",scope:"/"};var it=ot;function at(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(x.a)(e,at._CONFIG);return new Promise(function(e,n){"Worker"in self?(t.file in at._WORKER_CACHE||(at._WORKER_CACHE[t.file]=new Worker(t.file)),e(at._WORKER_CACHE[t.file])):n(new Error("您的浏览器不支持 Web Worker"))})}at._WORKER_CACHE={},at._CONFIG={file:"ww.js"};var ct={serviceWorker:it,webWorker:at},ut="Notification"in self?function(e,t,n){var r,o=self.Notification;return("granted"===o.permission?Promise.resolve():"requestPermission"in o?o.requestPermission():Promise.reject("需要请求允许")).then(function(){return new Promise(function(i,a){try{(r="object"===q()(t)?new o(e,t):new o(e,{icon:n||"/image/favicon.ico",body:t})).onclick=function(){r.close(),i()}}catch(e){console.log(e),a(e)}})})}:function(){return Promise.reject(new Error("浏览器不支持 Notification 功能"))};n.d(t,"Model",function(){return $.a}),n.d(t,"CookieModel",function(){return re}),n.d(t,"LocalStorageModel",function(){return ae}),n.d(t,"SessionStorageModel",function(){return ue}),n.d(t,"IndexedDBModel",function(){return fe}),n.d(t,"WebSQLModel",function(){return ye}),n.d(t,"FileSystemModel",function(){return _e}),n.d(t,"CacheStorageModel",function(){return be.a}),n.d(t,"ServiceModel",function(){return je}),n.d(t,"WebSocketModel",function(){return Pe}),n.d(t,"EventSourceModel",function(){return Ce}),n.d(t,"Router",function(){return ze}),n.d(t,"Listener",function(){return u.a}),n.d(t,"View",function(){return Ve}),n.d(t,"Device",function(){return z}),n.d(t,"Util",function(){return L}),n.d(t,"Url",function(){return U});var st=c()({Listener:u.a,listener:u.b,util:L,url:U,device:z},r,{model:Re,view:Ve},o,{router:Ke,error:Xe,unHandledRejection:$e,position:et,animate:i,register:ct,notify:ut});window.maple=st;t.default=st}])});
//# sourceMappingURL=index.js.map