!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=167)}({15:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(41),l=function(e){return e&&e.__esModule?e:{default:e}}(a),c=n(2),s=function(){function e(t){o(this,e);var n=document.createElement("a",l.default.ceKey);n.href=t||location.href,this.source=n.href,this.protocol=n.protocol.replace(":",""),this.origin=n.origin,this.host=n.hostname,this.port=n.port,this.path=n.pathname.replace(/^([^\/])/,"$1"),this.relative=(n.href.match(/tps?:\/\/[^\/]+(.*)/)||["",""])[1],this.file=(n.pathname.match(/\/([^\/?#]+)$/i)||["",""])[1],this.dir=this.path.replace(this.file,""),this.segments=n.pathname.replace(/^\//,"").split("/"),this.params=this.parseSearch(n.search),this.hash=n.hash.slice(1),this.from=document.referrer,n=null}return u(e,[{key:"parseSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&/^\?/.test(e)&&(e=e.slice(1)),e?e.split("&").reduce(function(e,t){var n=void 0;return t&&(n=t.split("="),e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"").replace(/\?10000skup(=true)?/,"")),e},{}):{}}},{key:"pack",value:function(){return this.protocol+"://"+this.host+(this.port&&"80"!==this.port?":"+this.port:"")+this.path+this.query+(this.hash?"#"+this.hash:"")}},{key:"changeParams",value:function(e){var t=this,n=void 0;return n="string"==typeof e?[].slice.call(arguments):e,Array.isArray(n)?n.forEach(function(e){"string"==typeof e&&delete t.params[e]}):"object"===(void 0===n?"undefined":i(n))&&Object.keys(n).forEach(function(n){t.params[n]=e[n]}),this}},{key:"query",get:function(){var e=this,t=Object.keys(this.params).reduce(function(t,n){return t.push(encodeURIComponent(n)+"="+encodeURIComponent(e.params[n])),t},[]);return t.length?"?"+t.join("&"):""}}]),e}(),f=new s;f.Url=s,f.parseUrl=function(e){return e instanceof s?e:"string"==typeof e?new s(e):new s},f.addProtocol=function(e){return/^\/\//.test(e)?location.protocol+e:e},f.reload=function(){location.reload()},f.back=function(){history.back()},f.push=function(e,t){var n=arguments.length,o=arguments,u=null;return n>1&&("object"===(void 0===e?"undefined":i(e))?u=arguments[1]:"object"===i(arguments[n-1])&&(u=arguments[n-1],o=[].slice.call(arguments,0,-1))),this.changeParams.apply(this,r(o)),history.pushState(u,"",this.pack()),this},f.pushHistory=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return history.pushState(t,"",e),this},f.changePage=function(e){location.assign(e)},f.replace=function(e){return this.changeParams.apply(this,arguments),history.replaceState(null,"",this.pack()),this},f.replaceHistory=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return history.replaceState(t,"",e),this},f.replacePage=function(e){location.replace(e)},f.hashChange=(0,c.listener)("hashchange",function(e,t){var n=void 0;e.newUrl?n=f.parseUrl(e.newUrl):t&&(n=f.parseUrl(t)),n&&(f.hash=n.hash)}),f.popState=(0,c.listener)("popstate",function(e,t){var n=void 0,r=e.state;if(n=t?f.parseUrl(t):f.parseUrl(location.href),"string"==typeof r)try{r=JSON.parse(r)}catch(e){}console.log(r),Object.keys(n).forEach(function(e){f[e]=n[e]})}),t.default=f},16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD").replace(/YYYY|YY|MM|DD|hh|mm|ss|星期|周|www|week/,function(n){return n in e._dateStrReplace?e[n](t):""})};i._dateStrReplace={YYYY:function(e){return e.getFullYear()+""},YY:function(e){return(e.getFullYear()+"").slice(2)},MM:function(e){return o.default.fillZero(e.getMonth()+1,2)},DD:function(e){return o.default.fillZero(e.getDate(),2)},hh:function(e){return o.default.fillZero(e.getHours(),2)},mm:function(e){return o.default.fillZero(e.getMinutes(),2)},ss:function(e){return o.default.fillZero(e.getSeconds(),2)},www:function(e){return i._WEEK_EN[e.getDay()].slice(0,3)},week:function(e){return i._WEEK_EN[e.getDay()]},"星期":function(e){return"星期"+i._WEEK_CN[e.getDay()]},"周":function(e){return"周"+i._WEEK_CN[e.getDay()]}},i.formatTimeStr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d",n=0,r=void 0;return"number"==typeof e?n=t&&t in i._SHORT_TIME_NUM?e*i._SHORT_TIME_NUM[t]:e:"string"==typeof e&&(r=i._SHORT_TIME_EXPR.exec(e))&&(n=Number(r[1])*(i._SHORT_TIME_NUM[r[2]]||1)),n},i._WEEK_EN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i._WEEK_CN=["日","一","二","三","四","五","六"],i._SHORT_TIME_EXPR=/^(-?\d+)(s|m|h|d|y)?$/i,i._SHORT_TIME_NUM={s:1e3,m:6e4,h:36e5,d:864e5,y:31536e6},t.default=i},167:function(e,t,n){e.exports=n(20)},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=null,o=function(){var n=this||null,o=[].slice.call(arguments);r&&clearTimeout(r),r=setTimeout(function(){e.apply(n,o||[])},t)};return o.cancel=function(){r&&(clearTimeout(r),r=null,n&&n())},o.immediate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o.cancel(),e.apply(t,n)},o};t.default=r},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){var r=null,o=function(){var n=this||null,o=[].slice.call(arguments);r||(e.apply(n,o||[]),r=setTimeout(function(){clearTimeout(r),r=null},t))};return o.cancel=function(){r&&(clearTimeout(r),r=null,n&&n())},o.immediate=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o.cancel(),e.apply(n,i),r=setTimeout(function(){clearTimeout(r),r=null},t)},o};t.default=r},19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n=void 0;if(e+="",t>e.length)for(n=e.length;n<t;n++)e="0"+e;return e};t.default={fillZero:r}},2:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.listener=t.Listener=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(17),l=r(a),c=n(18),s=r(c),f=n(3),p=r(f),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,e),!t.type)throw console.log("未指定监听事件"),new Error("未指定监听事件");this._config=(0,p.default)(t,e._CONFIG),this._isListening=!1,this._listener=null,this._eventQueue=[]}return u(e,[{key:"_queueExecute",value:function(){var e=this._eventQueue;return function(){for(var t=!0,n=0,r=e.length,o=this||null,i=[].slice.call(arguments);n<r;n++)if(!1===(t=e[n].apply(o,i)))return!1;return t}}},{key:"add",value:function(e){return-1===this._eventQueue.indexOf(e)?this._eventQueue.push(e):console.log("该函数已经存在于队列中"),this}},{key:"on",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=Number(e),this._isListening?this:this._config.target?(this._config.useDebounce&&e&&e>0?this._listener=(0,l.default)(this._queueExecute(),e):this._config.useThrottle&&e&&e>0?this._listener=(0,s.default)(this._queueExecute(),e):this._listener=this._queueExecute(),"addEventListener"in this._config.target&&this._config.target.addEventListener(this._config.type,this._listener,this._config.useCapture),this._isListening=!0,this):this}},{key:"off",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._config.target)return this;if("boolean"==typeof e&&e)"removeEventListener"in this._config.target&&this._config.target.removeEventListener(this._config.type,this._listener,this._config.useCapture),"cancel"in this._listener&&(this._listener.cancel(),this._listener=null),this._isListening=!1;else if("function"==typeof e){var t=this._eventQueue.indexOf(e);this._eventQueue.splice(t,1)}return this}},{key:"trigger",value:function(){var e=this._config.target,t={type:this._config.type,target:this._config.target},n=[].slice.call(arguments);n.unshift(t),"immediate"in this._listener?this._listener.immediate(e,n):this._listener.apply(e,n)}}]),e}();y._CONFIG={type:"",target:window||self||null,useCapture:!0,passsive:!0,useDebounce:!1,useThrottle:!1};var h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o={},u=void 0;return"object"===(void 0===n?"undefined":i(n))&&(r=n,n=null),"function"==typeof t&&(n=t,t=null),"string"==typeof e&&(t=e,e=null),t&&(o.type=t),e&&(o.target=e),o=(0,p.default)(o,r),u=new y(o),u.on(),n&&u.add(n),u};t.Listener=y,t.listener=h},20:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(70),u=r(i),a=n(15),l=r(a),c=n(59),s=r(c),f=n(46),p=r(f),y=n(74),h=r(y),d=n(58),_=r(d),v=n(54),g=r(v),b=n(23),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(b),O=n(55),w=r(O),j=n(53),P=r(j),k={Listener:o.Listener,listener:o.listener,util:u.default,url:l.default,device:s.default,Model:p.default,model:p.default,view:h.default,router:_.default,position:g.default,animate:m,register:w.default,notify:P.default};window.maple=k,t.default=k},23:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.queue=t.animator=void 0;var o=n(9),i=r(o),u=n(24),a=r(u);t.animator=i.default,t.queue=a.default},24:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9),u=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function e(t){r(this,e),this.animators=t||[]}return o(e,[{key:"append",value:function(){this.animators.push.apply(this.animators,arguments)}},{key:"flush",value:function(){var e=this;this.animators.length&&function t(){var n=e.animators.shift();n instanceof u.default?n.start(function(){e.animators.length&&t()}):(n.apply(e),e.animators.length&&t())}()}}]),e}();t.default=a},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n=Object.keys(t).reduce(function(n,r){return n[r]=r in e?e[r]:t[r],n},{});return Object.keys(e).reduce(function(t,n){return n in t||(t[n]=e[n]),t},n)};t.default=r},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={dev:{},test:{},pre:{},online:{},ceKey:""}},45:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},s=n(5),f=r(s),p=n(16),y=r(p),h=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return navigator.cookieEnabled?(e._enabled=!0,e._store=Promise.resolve(!0)):(e._enabled=!1,e._store=Promise.reject(new Error("此浏览器不支持 Cookie"))),e}return u(t,e),l(t,[{key:"_setCookie",value:function(e,n,r){return"object"!==(void 0===r?"undefined":a(r))&&(r={expires:r}),r.expires&&(r.expires=t._transDate(r.expires)),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(this._stringify(n))+Object.keys(t._DEFAULT).reduce(function(e,n){return e+="; "+n+"=",e+=n in r?r[n]:t._DEFAULT[n]},""),!0}},{key:"_getCookie",value:function(e){var n=document.cookie,r=0,o=void 0,i="",u=void 0;for(n=n?n.split("; "):[],o=n.length;r<o;r++)if(u=n[r].split("="),e===decodeURIComponent(u[0])){i=decodeURIComponent(u[1]);break}if(i){try{i=JSON.parse(i)}catch(e){}c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e,i)}else i=Promise.reject(null);return i}},{key:"_setByObject",value:function(e,t){var n=this;return Promise.all(Object.keys(e).map(function(r){return n.setData(r,e[r],t)})).then(function(e){return!!e})}},{key:"setData",value:function(e,n,r){var o=this,i=void 0;return"object"===(void 0===e?"undefined":a(e))?(r=n,i=this._setByObject(e,r)):i=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e,n).then(function(){return o._store}).then(function(){return o._setCookie(e,n,r)}),i}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r>1?this._getByArray([].slice.call(arguments)):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this,e).catch(function(){return n._store.then(function(){return n._getCookie(e)})})}},{key:"getDataSync",value:function(e){var n=this,r=arguments.length,o=void 0,i=void 0;return this._enabled?(o=Array.isArray(e)?r>1?[].slice.call(arguments):e:[e],i=o.reduce(function(e,r){if(r in n._value)e[r]=n._value[r];else{e[r]=n._getCookie(r)||null;try{e[r]=JSON.parse(e[r])}catch(e){}c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",n).call(n,r,e[r])}return e},{}),Array.isArray(e)||(i=i[e])):i=null,i}},{key:"removeData",value:function(e){var n=this;return Array.isArray(e)?this._removeByArray(e):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeData",this).call(this,e).then(function(){return n._setCookie(e,"",-1)})}},{key:"clearData",value:function(){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearData",this).call(this)}},{key:"getCookieLength",value:function(){return this._enabled?document.cookie.length:0}}],[{key:"_transDate",value:function(e){return e instanceof Date||(e=y.default.formatTimeStr(e),e=0===e?"":new Date(Date.now()+e)),e&&e.toUTCString()}}]),t}(f.default);h._DEFAULT={path:"/",domain:"",expires:"",secure:""},f.default.register("cookie",h),f.default.registerAlias("cookie","c"),t.default=h},46:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=function(e){return e&&e.__esModule?e:{default:e}}(r);n(45),n(48),n(50),n(47),n(51),n(49),n(52),t.default=o.default},47:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},s=n(5),f=r(s),p=n(3),y=r(p),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._config=(0,y.default)(e,t._CONFIG),n._store=new Promise(function(e,t){var r=void 0,o=void 0;r=self.indexedDB||self.mozIndexedDB||self.webbkitIndexedDB||self.msIndexedDB||null,r?(o=r.open(n._config.dbName,n._config.dbVersion),o.onupgradeneeded=function(e){var t=e.target.result,r=void 0;t.objectStoreNames.contains(n._config.tableName)||(r=t.createObjectStore(n._config.tableName,{keyPath:n._config.keyPath}),n._config.index.forEach(function(e){r.createIndex(e.name,e.keyPath||e.name,{unique:e.unique||!1})}))},o.onsuccess=function(t){e(t.target.result)},o.onerror=function(e){console.log(e),t(e)}):t(new Error("此数据库不支持 IndexedDB"))}),n}return u(t,e),l(t,[{key:"_select",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){var i=n.transaction([t._config.tableName],"readwrite").objectStore(t._config.tableName),u=i.get(e);u.onsuccess=function(e){r(e.target.result)},u.onerror=function(e){console.log(e),o(e)}})})}},{key:"_put",value:function(e,t){var n=this;return this._store.then(function(r){return new Promise(function(o,i){var u=r.transaction([n._config.tableName],"readwrite").objectStore(n._config.tableName),a=u.put({topic:e,value:t});a.onsuccess=function(e){o(!!e.target.result)},a.onerror=function(e){console.log(e),i(e)}})})}},{key:"_delete",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){var i=n.transaction([t._config.tableName],"readwrite").objectStore(t._config.tableName),u=i.delete(e);u.onsuccess=function(e){r(!0)},u.onerror=function(e){console.log(e),o(e)}})})}},{key:"_clear",value:function(){var e=this;return this._store.then(function(t){return new Promise(function(n,r){var o=t.transaction([e._config.tableName],"readwrite").objectStore(e._config.tableName),i=o.clear();i.onsuccess=function(e){n(!0)},i.onerror=function(e){console.log(e),r(e)}})})}},{key:"setData",value:function(e,n){var r=this;return"object"===(void 0===e?"undefined":a(e))?this._setByObject(e):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e,n).then(function(){return r._put(e,n)})}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r>1?this._getByArray([].slice.call(arguments)):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this,e).catch(function(){return n._select(e).then(function(r){var o=void 0;if(r){if("string"==typeof(o=r.value))try{o=JSON.parse(o)}catch(e){}c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",n).call(n,e,o)}else o=Promise.reject(null);return o})})}},{key:"removeData",value:function(e){var n=this;return Array.isArray(e)?this._removeByArray(e):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeData",this).call(this,e).then(function(){return n._delete(e)})}},{key:"clearData",value:function(){var e=this;return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearData",this).call(this).then(function(){return e._clear()})}},{key:"getDataByRange",value:function(e,t){var n=this;!(arguments.length>2&&void 0!==arguments[2])||arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length;return this._store.then(function(e){return new Promise(function(t,r){var o=e.transaction([n._config.tableName],"readwrite").objectStore(n._config.tableName),i=o.openCursor(),u=[];i.onsuccess=function(e){var n=e.target.result;n?(u.push(n.value),n.continue()):t(u)},i.onerror=function(e){console.log(e),r(e)}})})}}]),t}(f.default);h._CONFIG={dbName:"storage",tableName:"storage",dbVersion:1,keyPath:"topic",index:[{name:"topic",keyPath:"topic",unique:!0},{name:"value",keyPath:"value",unique:!1}]},f.default.register("indexedDB",h),f.default.registerAlias("indexedDB","idb"),t.default=h},48:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},s=n(5),f=r(s),p=n(3),y=r(p),h=n(2),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._config=(0,y.default)(e,t._CONFIG),"localStorage"in self?(n._enabled=!0,n._storeSync=self.localStorage,n._store=Promise.resolve(self.localStorage),e.listen&&!t._listenOn&&t.listenOn()):(n._enabled=!1,n._storeSync=null,n._store=Promise.reject(new Error("此浏览器不支持 localStorage"))),n}return u(t,e),l(t,[{key:"setData",value:function(e,n){var r=this;return"object"===(void 0===e?"undefined":a(e))?this._setByObject(e):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e,n).then(function(){return r._store.then(function(t){return t.setItem(e,r._stringify(n)),!0})})}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r.length>1?this._getByArray([].slice.call(arguments)):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this,e).catch(function(){return n._store.then(function(r){var o=r.getItem(e);if(null===o)o=Promise.reject(null);else{try{o=JSON.parse(o)}catch(e){}c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",n).call(n,e,o)}return o})})}},{key:"getDataSync",value:function(e){var n=this,r=arguments.length,o=void 0,i=void 0;return this._enabled?(o=Array.isArray(e)?r>1?[].slice.call(arguments):e:[e],i=o.reduce(function(e,r){if(r in n._value)e[r]=n._value[r];else{e[r]=n._storeSync.getItem(r);try{e[r]=JSON.parse(e[r])}catch(e){}c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",n).call(n,r,e[r])}},{}),Array.isArray(e)||(i=i[e])):i=null,i}},{key:"removeData",value:function(e){var n=this;return Array.isArray(e)?this._removeByArray(e):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeData",this).call(this,e).then(function(){return n._store.then(function(t){return t.removeItem(e),!0})})}},{key:"clearData",value:function(){var e=this;return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearData",this).call(this).then(function(){return e._store.then(function(e){return e.clear(),!0})})}},{key:"on",value:function(e){this._eventList.push(e),t._EVENT_LIST.push(e)}},{key:"off",value:function(e){var n=this._eventList.indexOf(e);-1!==n&&this._eventList.splice(n,1),-1!==(n=t._EVENT_LIST.indexOf(e))&&t._EVENT_LIST.splice(n,1)}}],[{key:"listenOn",value:function(){t._listenOn||(t._globalStorage=(0,h.listener)("storage",function(e){var n=e.key,r=e.newValue,o=e.oldValue;t._EVENT_LIST.length&&t._EVENT_LIST.forEach(function(e){return e(n,r,o)})}),t._listenOn=!0)}},{key:"listenOff",value:function(){t._listenOn&&t._globalStorage&&(t._globalStorage.off(),t._listenOn=!1)}}]),t}(f.default);d._CONFIG={listen:!0},d._EVENT_LIST=[],d._listenOn=!1,f.default.register("localStorage",d),f.default.registerAlias("localStorage","ls"),t.default=d},49:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(5),s=r(c),f=n(3),p=r(f),y=n(69),h=r(y),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._config=(0,p.default)(e,t._CONFIG),n._syncTo=null,n.interceptor={req:new h.default,res:new h.default},n}return u(t,e),l(t,[{key:"_setOpts",value:function(e){return(0,p.default)(e,{cache:!1,dataType:"json",timeout:this._config.timeout||1e4,xhrFields:{withCredentials:!0}})}},{key:"setData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"object"===(void 0===e?"undefined":a(e))&&(n=e,e=n.url),e=this._config.baseUrl+e,n=this._setOpts(n),n.method=n.method||"POST",e?this.reqInterceptor(e,n).then(function(r){return console.log("发送 post 请求",e),t.request(e,n)}).then(function(e){return t.resInterceptor(e)}):Promise.reject()}},{key:"getData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=void 0;return"boolean"==typeof n&&(r=n,n={}),"object"===(void 0===e?"undefined":a(e))&&(n=e,e=n.url),e?(r&&this._syncTo?o=this._syncTo.getData(e):(o=Promise.reject(),e=this._config.baseUrl+e,n=this._setOpts(n),n.method=n.method||"GET"),o=o.catch(function(){return t.reqInterceptor(e,n).then(function(){return console.log("发送 get 请求",e),t.request(e,n)}).then(function(e){return t.resInterceptor(e)}).then(function(n){return r&&t._syncTo?t._syncTo.setData(e,n).then(function(){return n},function(e){return console.log(e),n}):n})})):o=Promise.reject(),o}},{key:"removeData",value:function(e,t){return Promise.resolve(!0)}},{key:"clearData",value:function(){return Promise.resolve(!0)}},{key:"syncTo",value:function(e){e instanceof s.default&&!(e instanceof t)&&(this._syncTo=e)}},{key:"request",value:function(e,t){try{return $.ajax(e,t).then(function(e){return e},function(){return new Error})}catch(e){return console.log("未加载 jquery"),Promise.reject()}}},{key:"reqInterceptor",value:function(e,n){var r=this,o=function(e){return e.some(function(e){return!1===e})?Promise.reject():Promise.resolve()};return console.log("执行全局请求拦截器",e),Promise.all(t.interceptor.req.fireAll(null,e,n)).then(o).then(function(){return console.log("执行局部请求拦截器",e),Promise.all(r.interceptor.req.fireAll(null,e,n)).then(o)})}},{key:"resInterceptor",value:function(e){var n=this;return console.log("执行全局响应拦截器"),t.interceptor.res.fireReduce(null,e).then(function(e){return console.log("执行局部响应拦截器"),n.interceptor.res.fireReduce(null,e)})}}]),t}(s.default);d._CONFIG={baseUrl:"",task:!1,timeout:1e4},d.interceptor={req:new h.default,res:new h.default},s.default.ServiceModel=d,s.default.register("service",d),s.default.registerAlias("service","s"),t.default=d},5:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),a=function(){function e(){var t=this;r(this,e),this._value=Object.create(null),this._eventList=[],this._syncList=[],this._listener=(0,u.listener)(this,"modelChange",function(e,n,r){t._sync(n,r)})}return i(e,[{key:"_stringify",value:function(e){return null!==e&&void 0!==e||(e=""),"object"===(void 0===e?"undefined":o(e))?JSON.stringify(e):e.toString()}},{key:"_trigger",value:function(e,t){this._listener.trigger(e,t)}},{key:"_sync",value:function(e,t){this._syncList.length&&Promise.all(this._syncList.map(function(n){var r=void 0;return r=null!==t?n.setData(e,t):n.removeData(e),r.catch(function(e){console.log(e,n.constructor.name,"同步失败")}),r})).then(function(){console.log("同步完成")})}},{key:"_setByObject",value:function(e){var t=this;return Promise.all(Object.keys(e).map(function(n){return t.setData(n,e[n])})).then(function(e){return!!e})}},{key:"_getByArray",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.getData(e).catch(function(){return null})})).then(function(t){return e.reduce(function(e,n,r){return e[n]=t[r],e},{})})}},{key:"_removeByArray",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.removeData(e)})).then(function(e){return!!e})}},{key:"on",value:function(e){this._listener.add(e)}},{key:"off",value:function(e){this._listener.off(e)}},{key:"setData",value:function(e,t){var n=this,r=void 0;return"object"===(void 0===e?"undefined":o(e))?r=this._setByObject(e):(e in this._value?this._value[e]=t:(Object.defineProperty(this._value,e,{enumerable:!0,configurable:!0,set:function(r){console.log("设置",e,"的值为",r),r!==t&&n._trigger(e,r)},get:function(){return console.log("获取",e,"的值",t,void 0===t?"undefined":o(t)),t}}),this._trigger(e,t)),r=Promise.resolve(!0)),r}},{key:"getData",value:function(e){var t=arguments.length;return Array.isArray(e)?this._getByArray(e):t>1?this._getByArray([].slice.call(arguments)):e in this._value?Promise.resolve(this._value[e]):Promise.reject(null)}},{key:"removeData",value:function(e){var t=void 0;if(Array.isArray(e))t=this._removeByArray(e);else try{e in this._value?(delete this._value[e],t=Promise.resolve(!0),this._trigger(e,null)):(t=Promise.resolve(!0),this._trigger(e,null))}catch(e){t=Promise.reject(e)}return t}},{key:"clearData",value:function(){return this._value={},Promise.resolve(!0)}},{key:"syncTo",value:function(t){var n=this;Array.isArray(t)||(t=[t]),t.forEach(function(t){"object"===(void 0===t?"undefined":o(t))&&t instanceof e&&t.constructor!==n.constructor&&-1===n._syncList.indexOf(t)?n._syncList.push(t):console.log("该实例类型已经存在")})}},{key:"cleanSync",value:function(e){var t=this._syncList.indexOf(e);-1!==t&&this._syncList.splice(t,1)}}],[{key:"register",value:function(t,n){t in e&&t in e._MODEL_CACHE?console.log("type"," 重复注册，并已生成实例，不能覆盖"):e[t]=n}},{key:"registerAlias",value:function(t,n){Array.isArray(n)||(n=[n]),n.forEach(function(n){n in e._MODEL_ALIAS?console.log(n," 已经存在"):e._MODEL_ALIAS[n]=t})}},{key:"factory",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0;return t?("object"===(void 0===n?"undefined":o(n))&&(r=n,n=!0),!(t in e)&&t in e._MODEL_ALIAS&&(t=e._MODEL_ALIAS[t]),t in e?!n&&t in e._MODEL_CACHE?(i=e._MODEL_CACHE[t],console.log("从缓存中取到",t,"类型的对象")):(i=new e[t](r),n||(e._MODEL_CACHE[t]=i,console.log("通过工厂方法生成",t,"类型的对象","将",t,"类型的对象缓存"))):(i=new e,console.log("不存在注册为 ",t," 的子类"))):(i=new e,console.log("生成 model 对象")),i}}]),e}();a._MODEL_CACHE={},a._MODEL_ALIAS={},t.default=a},50:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},c=n(5),s=function(e){return e&&e.__esModule?e:{default:e}}(c),f=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"sessionStorage"in self?(e._enabled=!0,e._storeSync=self.sessionStorage,e._store=Promise.resolve(self.sessionStorage)):(e._enabled=!1,e._storeSync=null,e._store=Promise.reject(new Error("此浏览器不支持 sessionStorage"))),e}return i(t,e),a(t,[{key:"setData",value:function(e,n){var r=this;return"object"===(void 0===e?"undefined":u(e))?this._setByObject(e):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e,n).then(function(){return r._store.then(function(t){return t.setItem(e,r._stringify(n)),!0})})}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r>1?this._getByArray([].slice.call(arguments)):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this,e).catch(function(){return n._store.then(function(r){var o=r.getItem(e);if(null===o)o=Promise.reject(null);else{try{o=JSON.parse(o)}catch(e){}l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",n).call(n,e,o)}return o})})}},{key:"getDataSync",value:function(e){var n=this,r=arguments.length,o=void 0,i=void 0;return this._enabled?(o=Array.isArray(e)?r>1?[].slice.call(arguments):e:[e],i=o.reduce(function(e,r){if(r in n._value)e[r]=n._value[r];else{e[r]=n._storeSync.getItem(r);try{e[r]=JSON.parse(e[r])}catch(e){}l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",n).call(n,r,e[r])}},{}),Array.isArray(e)||(i=i[e])):i=null,i}},{key:"removeData",value:function(e){var n=this,r=void 0;return r=r?this._removeByArray(e):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeData",this).call(this,e).then(function(){return n._store.then(function(t){return t.removeItem(e),!0})})}},{key:"clearData",value:function(){var e=this;return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearData",this).call(this).then(function(){return e._store.then(function(e){return e.clear(),!0})})}}]),t}(s.default);s.default.register("sessionStorage",f),s.default.registerAlias("sessionStorage","ss"),t.default=f},51:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},s=n(5),f=r(s),p=n(3),y=r(p),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=e.sql;return n._config=(0,y.default)(e,t._CONFIG),r&&"object"===(void 0===r?"undefined":a(r))&&(n._config.sql=(0,y.default)(r,t._CONFIG.sql)),Object.keys(n._config.sql).forEach(function(e){n._config.sql[e]=n._replaceTableName(n._config.sql[e])}),n._store=new Promise(function(e,t){var r=void 0;"openDatabase"in self?(r=openDatabase(n._config.dbName,""+n._config.dbVersion,n._config.dbName,n._config.dbSize),r.transaction(function(o){o.executeSql(n._config.sql.create,[],function(){e(r)},function(e,n){console.log(n),t(n)})})):t(new Error("此浏览器不支持 Web SQL Database"))}),n}return u(t,e),l(t,[{key:"_replaceTableName",value:function(e){return e.replace(/{{tableName}}/g,this._config.tableName)}},{key:"_select",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){n.transaction(function(n){n.executeSql(t._config.sql.select,[e],function(e,t){r(t.rows)},function(e,t){console.log(t),o(t)})})})})}},{key:"_update",value:function(e,t){var n=this;return this._store.then(function(r){return new Promise(function(o,i){r.transaction(function(r){r.executeSql(n._config.sql.update,[t,e],function(e,t){o(!!t.rowsAffected)},function(e,t){console.log(t),i(t)})})})})}},{key:"_insert",value:function(e,t){var n=this;return this._store.then(function(r){return new Promise(function(o,i){r.transaction(function(r){r.executeSql(n._config.sql.insert,[e,t],function(e,t){o(!!t.insertId)},function(e,t){console.log(t),i(t)})})})})}},{key:"_delete",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){n.transaction(function(n){n.executeSql(t._config.sql.delete,[e],function(e,t){r(!!t.rowsAffected)},function(e,t){console.log(t),o(t)})})})})}},{key:"_clear",value:function(){var e=this;return this._store.then(function(t){return new Promise(function(n,r){t.transaction(function(t){t.executeSql(e._config.sql.clear,[],function(e,t){n(!!t.rowsAffected)},function(e,t){console.log(t),r(t)})})})})}},{key:"setData",value:function(e,n){var r=this;return"object"===(void 0===e?"undefined":a(e))?this._setByObject(e):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e,n).then(function(){return n=r._stringify(n),r._select(e)}).then(function(t){return t&&t.length?r._update(e,n):r._insert(e,n)})}},{key:"getData",value:function(e){var n=this,r=arguments.length;return Array.isArray(e)?this._getByArray(e):r>1?this._getByArray([].slice.call(arguments)):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this,e).catch(function(){return n._select(e).then(function(r){var o="";if(r&&r.length){o=r[0].value;try{o=JSON.parse(o)}catch(e){}c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",n).call(n,e,o)}else o=Promise.reject(null);return o})})}},{key:"removeData",value:function(e){var n=this;return Array.isArray(e)?this._removeByArray(e):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeData",this).call(this,e).then(function(){return n._delete(e)})}},{key:"clearData",value:function(){var e=this;return this.clearData().then(function(){return e._clear()})}},{key:"executeSql",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this._store.then(function(n){return new Promise(function(r,o){n.transaction(function(n){n.executeSql(e,t,function(e,t){r(t)},function(e,t){console.log(t),o(t)})})})})}},{key:"createIndex",value:function(e){var t=this;return this._store.then(function(n){return new Promise(function(r,o){n.transaction(function(n){n.executeSql(t._config.sql.createIndex.replace(/{{col}}/g,e),[],function(e,t){r(!!t.rowsAffected)},function(e,t){o(t)})})})})}}]),t}(f.default);h._CONFIG={dbName:"storage",tableName:"storage",dbVersion:1,dbSize:2<<20,sql:{create:"create table if not exists `{{tableName}}`(id integer primary key autoincrement,topic text unique,value text)",select:"select * from `{{tableName}}` where topic=?",update:"update `{{tableName}}` set value=? where topic=?",insert:"insert into `{{tableName}}`(topic,value) values(?,?)",delete:"delete from `{{tableName}}` where topic=?",clear:"delete from `{{tableName}}`",createIndex:"create index if not exists index_{{col}} on `{{tableName}}`(`{{col}}`)"}},f.default.register("webSQL",h),f.default.registerAlias("webSQL",["ws","sql"]),t.default=h},52:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),l=r(a),c=n(3),s=r(c),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._config=(0,s.default)(e,t._CONFIG),n}return u(t,e),t}(l.default);f._CONFIG={},l.default.register("webSocket",f),l.default.registerAlias("webSocket","socket"),t.default=f},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){};r="Notification"in self?function(e,t){var n=self.Notification,r=void 0,o=void 0;o="granted"===n.permission?Promise.resolve():n.requestPermission(),o.then(function(){return new Promise(function(o){r=new n(e,{icon:"/image/favicon.ico",body:t}),r.onclick=function(){r.close(),o()}})})}:function(){return Promise.reject()},t.default=r},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"geolocation"in navigator?new Promise(function(n,r){var i=(0,o.default)(t,e._CONFIG);navigator.geoposition.getCurrentPosition(n,r,i)}):Promise.reject(new Error("您的浏览器不支持地理定位功能"))};i._CONFIG={enableHighAccuracy:!0,timeout:2e3,maximumAge:5e3},t.default=i},55:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(56),i=r(o),u=n(57),a=r(u);t.default={serviceWorker:i.default,webWorker:a.default}},56:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.default)(e,r._CONFIG);return new Promise(function(e,n){"serviceWorker"in navigator?(t.file in r._CACHE||(r._CACHE[t.file]=navigator.serviceWorker.register(t.file,{scope:t.scope}).then(function(e){var t=void 0;return e.installing?t=e.installing:e.waiting?t=e.waiting:e.active&&(t=e.active),t&&t.addEventListener("statechange",function(e){console.log(e)}),!0}).catch(function(e){console.log(e)}),navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(t){t?console.log("remain endpoint",t.endpoint):e.pushManager.subscribe({userVisibleOnly:!0}).then(function(e){console.log("Subscribed! Endpoint",e.endpoint)})})})),e(r._CACHE[t.file])):n(new Error("该浏览器不支持 Service Worker"))})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(o);r._CACHE={},r._CONFIG={file:"sw.js",scope:"./"},t.default=r},57:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.default)(e,r._CONFIG);return new Promise(function(e,n){"Worker"in self?(t.file in r._WORKER_CACHE||(r._WORKER_CACHE[t.file]=new Worker(t.file)),e(r._WORKER_CACHE[t.file])):n(new Error("您的浏览器不支持 Web Worker"))})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(o);r._WORKER_CACHE={},r._CONFIG={file:"ww.js"},t.default=r},58:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(15),l=r(a),c=n(3),s=r(c),f=n(2),p=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.listener=(0,f.listener)(this,"routerChange",function(e,t,n){}),this.routers=[],"routers"in n&&Array.isArray(n.routers)&&n.routers.forEach(function(e){t.register(e)})}return u(e,[{key:"init",value:function(){var e=void 0;l.default.hash&&(e=l.default.parseUrl(l.default.hash),this.has(e.path)&&this.get(e))}},{key:"hash",value:function(){}},{key:"register",value:function(e,t){var n=[],r=null,o="";return"object"!==(void 0===e?"undefined":i(e))||e instanceof RegExp?o=e:(o=e.path,t=e.callback),"object"===(void 0===o?"undefined":i(o))&&o instanceof RegExp?r=o:"string"==typeof o&&(/^\//.test(o)||(o=l.default.dir+o),r=o.replace(/:([^\/]*)/g,function(e,t){return n.push(t),"([^\\/]+)"}),r=new RegExp("^"+r+"$")),r&&this.routers.push({pattern:r,paramNames:n,callback:t}),void 0===y||i(y),this}},{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.default.parseUrl(e);return e=r.path,this.routers.map(function(o){var i=o.pattern.exec(e),u=void 0;if(i){u=i.slice(1).reduce(function(e,t,n){return e[o.paramNames[n]]=t,e},{}),u=(0,s.default)(u,n);try{o.callback(u),t.listener.trigger(l.default.pack(),r.pack())}catch(t){console.log(e,"路由执行错误",t)}}return!!i}).some(function(e){return e})}},{key:"has",value:function(e){return this.routers.some(function(t){return t.pattern.test(e)})}}]),e}(),y=new p;l.default.popState.add(function(){y.get(location.href)||console.log("router 中不存在",location.href)}),t.default=y},59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={androidchorme:"androidchrome",guge:"chrome",webview:"webView",minimalui:"minimalUi",statusbar:"statusBar",pixelratio:"pixelRatio",wechat:"weixin",wx:"weixin"},o=navigator.userAgent,i=function e(){var t=arguments.length,n=!0,o=void 0,i=void 0;if(0===t)n=!1;else for(o=0;o<t&&(i=arguments[o],i in e&&e.hasOwnProperty(i)?n=n&&e[i]:(i=i.toLowerCase(),n=i in r?n&&e[r[i]]:n&&!1),n);o++);return n},u=o.match(/(Android);?[\s\/]+([\d.]+)?/),a=o.match(/(iPad).*OS\s([\d_]+)/),l=o.match(/(iPod)(.*OS\s([\d_]+))?/),c=!a&&o.match(/(iPhone\sOS)\s([\d_]+)/);i.ios=i.android=i.iphone=i.ipad=i.androidChrome=!1,i.chrome=o.toLowerCase().indexOf("chrome")>=0,u&&(i.os="android",i.osVersion=u[2],i.android=!0,i.androidChrome=i.android&&i.chrome),(a||c||l)&&(i.os="ios",i.ios=!0),c&&!l&&(i.osVersion=c[2].replace(/_/g,"."),i.iphone=!0),a&&(i.osVersion=a[2].replace(/_/g,"."),i.ipad=!0),l&&(i.osVersion=l[3]?l[3].replace(/_/g,"."):null,i.iphone=!0),i.ios&&i.osVersion&&o.indexOf("Version/")>=0&&"10"===i.osVersion.split(".")[0]&&(i.osVersion=o.toLowerCase().split("version/")[1].split(" ")[0]),i.webView=(c||a||l)&&o.match(/.*AppleWebKit(?!.*Safari)/i);var s=document.documentElement.clientHeight,f=document.documentElement.clientWidth;i.statusBar=i.webView&&f*s==screen.width*screen.height,i.pixelRatio=window.devicePixelRatio||1,i.wechat=i.weixin=/MicroMessenger/i.test(o),i.uc=o.indexOf("UCBrowser")>-1,i.alipay=o.indexOf("AlipayClient")>0,t.default=i},69:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){o(this,e),this._queue=[],this._currIndex=0}return i(e,[{key:"add",value:function(e){return"function"==typeof e?this._queue.push(e):-1}},{key:"remove",value:function(e){if("function"==typeof e)e=this._queue.indexOf(e);else{if("number"!=typeof e)return;e=parseInt(e)}e>-1&&(this._queue[e]=null)}},{key:"empty",value:function(){this._queue=[],this._currIndex=0}},{key:"remain",value:function(){return this._currIndex<this._queue.length}},{key:"next",value:function(){var e=null,t=this._currIndex,n=this._queue.length;if(n){for(;t<n&&null===(e=this._queue[t]);t++);t!==n&&(this._currIndex=t+1)}return e}},{key:"reset",value:function(){this._currIndex=0}},{key:"fire",value:function(){return this.next().apply(void 0,arguments)}},{key:"fireAll",value:function(e){var t=arguments;return this.reset(),this._queue.filter(function(e){return null!==e}).map(function(e){return e.apply(void 0,r(t))})}},{key:"fireReduce",value:function(e){return this.reset(),this._queue.filter(function(e){return null!==e}).reduce(function(e,t){return e.then(function(e){return t(e)})},Promise.resolve(e))}}]),e}();t.default=u},70:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=r(o),u=n(18),a=r(u),l=n(71),c=r(l),s=n(3),f=r(s),p=n(16),y=r(p),h=n(19),d=r(h);t.default={debounce:i.default,throttle:a.default,lockup:c.default,merge:f.default,dateFormat:y.default,tools:d.default}},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=function t(){if(t._enable)return t._enable=!1,e.apply(null,arguments)};return t._enable=!0,t.clear=function(){t._enable=!0},t};t.default=r},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=(0,r.listener)("before");t.default=o},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=null,i="";"DeviceMotionEvent"in window&&(i="devicemotion"),i&&(o=(0,r.listener)(i,{useDebounce:!0})),t.default=o},74:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(76),i=r(o),u=n(77),a=r(u),l=n(73),c=r(l),s=n(75),f=r(s),p=n(72),y=r(p),h=n(78),d=r(h),_=!1,v=function(){_||(window.onunload=function(){},_=!0)},g=function(e,t){var n=null;return"getBoundingClientRect"in e&&(n=e.getBoundingClientRect(),t&&(n=n[t])),n},b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",r=arguments[3];e.postMessage(t,n,r)};t.default={resize:i.default,scroll:a.default,deviceMotion:c.default,message:f.default,beforeunload:y.default,unload:d.default,offset:g,needRefresh:v,postMessage:b}},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=(0,r.listener)("message");t.default=o},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=(0,r.listener)("resize",{useDebounce:!0});t.default=o},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=(0,r.listener)("scroll",{useDebounce:!0});o.disabled=function(e){e?(this._overflowState=window.getComputedStyle(document.body).overflow||"visible",document.body.style.overflow="hidden"):document.body.style.overflow=this._overflowState||"visible"},o.scrollBar=function(e,t){var n=arguments.length,r=document.body,o=document.documentElement,i=0,u=1,a=1,l=/^(\d+(?:\.\d+)?)(%|view)?$/,c=void 0;if(1===n){switch(arguments[0]){case"top":u=r.scrollHeight,i=r.scrollTop,a=o.clientHeight;break;case"bottom":u=r.scrollHeight,a=o.clientHeight,i=u-r.scrollTop-a;break;case"left":u=r.scrollWidth,i=r.scrollLeft,a=o.clientWidth;break;case"right":u=r.scrollWidth,a=o.clientWidth,i=u-r.scrollLeft-a}return{px:i,percent:Math.floor(i/u*100),view:parseFloat((i/a).toFixed(1))}}if(c=l.exec(t))switch(e){case"top":i=parseFloat(c[1]),"%"===c[2]?i=i*r.scrollHeight/100:"view"===c[2]&&(i*=o.clientHeight),r.scrollTop=i;break;case"bottom":i=parseFloat(c[1]),"%"===c[2]?i=Math.max(r.scrollHeight*(1-i/100),0):"view"===c[2]&&(i=Math.max(r.scrollHeight-i*o.clientHeight,0)),r.scrollTop=i;break;case"left":i=parseFloat(c[1]),"%"===c[2]?i=i*r.scrollWidth/100:"view"===c[2]&&(i*=o.clientWidth),r.scrollLeft=i;break;case"right":i=parseFloat(c[1]),"%"===c[2]?i=Math.max(r.scrollWidth*(1-i/100),0):"view"===c[2]&&(i=Math.max(r.scrollWidth-i*o.clientWidth,0)),r.scrollLeft=i}else console.log("scrollBar 参数设置错误")},t.default=o},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=(0,r.listener)("unload");t.default=o},9:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear";r(this,e),this.duration=t,this.progress=n,this._animate=null,"function"==typeof o?this.easing=o:"string"==typeof o&&o in e.timing?this.easing=e.timing[o]:this.easing=e.timing.linear}return o(e,[{key:"run",value:function(e){var t=Date.now(),n=this.duration,r=this;this._animate=requestAnimationFrame(function o(){var i=(Date.now()-t)/n,u=!0;i<1?r.progress(r.easing(i),i):(u="function"==typeof e?!1===e():!1===e,u?(t+=n,r.progress(r.easing(i),i)):r.progress(r.easing(1),1)),r._animate=u?requestAnimationFrame(o):null})}},{key:"stop",value:function(){this._animate&&(cancelAnimationFrame(this._animate),this._animate=null)}},{key:"renderCSS",value:function(){}}]),e}();i.timing={linear:function(e){return e},easing:function(e){},easingIn:function(e){},easingInOut:function(e){},easingOut:function(e){}},t.default=i}});
//# sourceMappingURL=base.js.map